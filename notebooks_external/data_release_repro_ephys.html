<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Release - Reproducible Ephys Paper &mdash; IBL Library  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Loading Data" href="../loading_examples.html" />
    <link rel="prev" title="Publicly available IBL data" href="../public_docs/public_introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> IBL Library
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The Open Neurophysiology Environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="one_quickstart.html">ONE Quick Start</a></li>
<li class="toctree-l1"><a class="reference external" href="https://int-brain-lab.github.io/ONE/">Full documentation Website for ONE</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DataJoint</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dj_docs/dj_introduction.html">Introduction to DataJoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dj_docs/dj_public.html">Publicly available IBL data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dj_docs/dj_credentials.html">DataJoint credentials for internal IBL users</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Public</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../public_docs/public_introduction.html">Publicly available IBL data</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Release - Reproducible Ephys Paper</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Overview-of-the-Data">Overview of the Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#alf">alf</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alf/probeXX/pykilosort">alf/probeXX/pykilosort</a></li>
<li class="toctree-l3"><a class="reference internal" href="#raw_ephys_data">raw_ephys_data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#raw_ephys_data/probeXX">raw_ephys_data/probeXX</a></li>
<li class="toctree-l3"><a class="reference internal" href="#raw_video_data">raw_video_data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Environment">Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Install-packages">Install packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Setting-up-credentials">Setting up credentials</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Getting-Started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Exploring-data">Exploring data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Advanced-example-of-navigating-the-metadata-and-filtering-data-download:-Query-data-for-a-specific-lab">Advanced example of navigating the metadata and filtering data download: Query data for a specific lab</a></li>
<li class="toctree-l3"><a class="reference internal" href="#More-information-on-ONE">More information on ONE</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Loading-different-objects">Loading different objects</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Exploring IBL Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../loading_examples.html">Loading Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../02_installation.html">Unified Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_contribution.html">How to contribute</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples &amp; Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../atlas_examples.html">Atlas Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs_wheel_moves.html">Working with wheel data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/dj_intro/dj_intro.html">Datajoint Introductory Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/dj_basics/dj_basics.html">Exploring the IBL Data Pipeline</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../010_api_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Detailed Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBL Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Data Release - Reproducible Ephys Paper</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/notebooks_external/data_release_repro_ephys.nblink.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Data-Release---Reproducible-Ephys-Paper">
<h1>Data Release - Reproducible Ephys Paper<a class="headerlink" href="#Data-Release---Reproducible-Ephys-Paper" title="Permalink to this headline"></a></h1>
<p>Understanding whole-brain-scale electrophysiological recordings will rely on the collective work of multiple labs. Because two labs recording from the same brain area often reach different conclusions, it is critical to quantify and control for features that decrease reproducibility. To address these issues, we formed a multi-lab collaboration using a shared, open-source behavioral task and experimental apparatus. We repeatedly inserted Neuropixels multi-electrode probes targeting the same brain
locations (called the repeated site, including posterior parietal cortex, hippocampus, and thalamus) in mice performing the behavioral task. For a full description of the study, please see the associated article.</p>
<section id="Overview-of-the-Data">
<h2>Overview of the Data<a class="headerlink" href="#Overview-of-the-Data" title="Permalink to this headline"></a></h2>
<p>As part of this paper we have released data from 60 Neuropixel recording sessions obtained at the repeated site location during the IBL task, in 6 laboratories. The data comprises both processed and raw data that are arranged into collections (folders).</p>
<p>Metadata for an additional 24 sessions has also been released. These contain information that was used for the histology targetting analysis in the paper. The processed and raw data for these sessions have not been released as the recordings did not pass our quality control metrics.</p>
<p>For sessions that contain data, an example of a folder structure of the data is shown below.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>subject/
├─ 2021-06-30/
│  ├─ 001/
│  │  ├─ alf/
│  │  │  ├─ probeXX/
│  │  │     ├─ pykilosort/
│  │  ├─ raw_ephys_data
│  │  ├─ raw_video_data
</pre></div>
</div>
<p>Everything contained within the <strong>alf</strong> folder is processed data, with all times synchronised to a common clock. This folder contains the required data for the majority of all analysis. All files in the alf folders follow the <a class="reference external" href="https://int-brain-lab.github.io/ONE/alf_intro.html#alyx-files-alf">Alyx File</a> naming convention, where related datasets are grouped into a common object e.g trials or wheel. Below is breakdown of the objects contained in each folder.</p>
<section id="alf">
<h3>alf<a class="headerlink" href="#alf" title="Permalink to this headline"></a></h3>
<p>Processed behaviour, wheel and video data</p>
<ul class="simple">
<li><p>trials -&gt; behavioural task related data (<a class="reference external" href="https://docs.google.com/document/d/1OqIqqakPakHXRAwceYLwFY9gOrm8_P62XIfCTnHwstg/edit#heading=h.nvzaz0fozs8h">Description of datasets</a>, <a class="reference external" href="https://int-brain-lab.github.io/iblenv/notebooks_external/loading_trials_data.html">Loading Example</a>)</p></li>
<li><p>wheel, wheelMoves -&gt; wheel data recorded during task (<a class="reference external" href="https://docs.google.com/document/d/1OqIqqakPakHXRAwceYLwFY9gOrm8_P62XIfCTnHwstg/edit#heading=h.hnjqyfnroyya">Description of datasets</a>, <a class="reference external" href="https://int-brain-lab.github.io/iblenv/notebooks_external/loading_wheel_data.html">Loading Example</a>)</p></li>
<li><p>leftCamera, rightCamera, bodyCamera -&gt; extracted dlc features during task (<a class="reference external" href="https://docs.google.com/document/d/1OqIqqakPakHXRAwceYLwFY9gOrm8_P62XIfCTnHwstg/edit#heading=h.yjwa7dpoipz">Description of datasets</a>, <a class="reference external" href="https://int-brain-lab.github.io/iblenv/notebooks_external/loading_video_data.html">Loading Example</a>)</p></li>
</ul>
</section>
<section id="alf/probeXX/pykilosort">
<h3>alf/probeXX/pykilosort<a class="headerlink" href="#alf/probeXX/pykilosort" title="Permalink to this headline"></a></h3>
<p>Spikesorted data</p>
<ul class="simple">
<li><p>spikes, clusters, channels -&gt; spikesorted output of neuropixel data (<a class="reference external" href="https://docs.google.com/document/d/1OqIqqakPakHXRAwceYLwFY9gOrm8_P62XIfCTnHwstg/edit#heading=h.5houj8bng5o">Description of datasets</a>, <a class="reference external" href="https://int-brain-lab.github.io/iblenv/notebooks_external/loading_spikesorting_data.html">Loading Example</a>)</p></li>
<li><p>spikes_subset -&gt; sample of waveforms extracted during spikesorting (<a class="reference external" href="https://docs.google.com/document/d/1OqIqqakPakHXRAwceYLwFY9gOrm8_P62XIfCTnHwstg/edit#heading=h.vcop4lz26gs9">Description of datasets</a>, <a class="reference external" href="https://int-brain-lab.github.io/iblenv/notebooks_external/loading_spike_waveforms.html">Loading Example</a>)</p></li>
</ul>
<p>Data stored in folders with the prefix <strong>raw</strong>, contain original data collected from each recording device (e.g Neuropixel probe or camera). Data in these folders are in the clock of the recording device and are not synchronised. For this paper we have released the raw electrophysiology data that has been used to obtain the spikesorting and the raw video data that has been used to extract DLC features. A summary of the data contained in each folder is given below.</p>
</section>
<section id="raw_ephys_data">
<h3>raw_ephys_data<a class="headerlink" href="#raw_ephys_data" title="Permalink to this headline"></a></h3>
<p>Synchronisation data recorded from NIDAQ (Note, for recordings obtained with 3A Neuropixel probes this folder is empty and synchronisation pulses are stored in the raw_ephys_data/probeXX folder)</p>
<ul class="simple">
<li><p>_spikeglx_ephysData*.nidq -&gt; raw synchronisation pulses from NIDAQ recorded using spikeglx (<a class="reference external" href="https://docs.google.com/document/d/1OqIqqakPakHXRAwceYLwFY9gOrm8_P62XIfCTnHwstg/edit#heading=h.ms0y69xbzova">Description of datasets</a>, <a class="reference external" href="https://int-brain-lab.github.io/iblenv/notebooks_external/loading_raw_ephys_data.html">Loading Example</a>)</p></li>
<li><p>_spikeglx_sync -&gt; extracted synchronisation pulses from NIDAQ (<a class="reference external" href="https://docs.google.com/document/d/1OqIqqakPakHXRAwceYLwFY9gOrm8_P62XIfCTnHwstg/edit#">Description of datasets</a>)</p></li>
</ul>
</section>
<section id="raw_ephys_data/probeXX">
<h3>raw_ephys_data/probeXX<a class="headerlink" href="#raw_ephys_data/probeXX" title="Permalink to this headline"></a></h3>
<p>Electrophysiology data</p>
<ul class="simple">
<li><p>_spikeglx_ephysData<em>.ap, _spikeglx_ephysData</em>.lf -&gt; raw ephys data in AP and LFP band recorded using spikeglx (<a class="reference external" href="https://docs.google.com/document/d/1OqIqqakPakHXRAwceYLwFY9gOrm8_P62XIfCTnHwstg/edit#heading=h.ms0y69xbzova">Description of datasets</a>, <a class="reference external" href="https://int-brain-lab.github.io/iblenv/notebooks_external/loading_raw_ephys_data.html">Loading Example</a>)</p></li>
<li><p>ephysTimeRmsAP, ephysTimeRmsLF -&gt; rms noise in AP and LFP band across recording (<a class="reference external" href="https://docs.google.com/document/d/1OqIqqakPakHXRAwceYLwFY9gOrm8_P62XIfCTnHwstg/edit#">Description of datasets</a>, <a class="reference external" href="https://int-brain-lab.github.io/iblenv/notebooks_external/loading_ephys_data.html">Loading Example</a>)</p></li>
<li><p>ephysSpectralDensityAP, ephysSpectralDensityLF -&gt; power spectrum in AP and LFP band (<a class="reference external" href="https://docs.google.com/document/d/1OqIqqakPakHXRAwceYLwFY9gOrm8_P62XIfCTnHwstg/edit#heading=h.fmz3a9wvpo4">Description of datasets</a>, <a class="reference external" href="https://int-brain-lab.github.io/iblenv/notebooks_external/loading_ephys_data.html">Loading Example</a>)</p></li>
</ul>
</section>
<section id="raw_video_data">
<h3>raw_video_data<a class="headerlink" href="#raw_video_data" title="Permalink to this headline"></a></h3>
<p>Camera data</p>
<ul class="simple">
<li><p>bodyCamera, leftCamera, rightCamera - raw video files (<a class="reference external" href="https://docs.google.com/document/d/1OqIqqakPakHXRAwceYLwFY9gOrm8_P62XIfCTnHwstg/edit#heading=h.qsj6net9dgkb">Description of datasets</a>, <a class="reference external" href="https://int-brain-lab.github.io/iblenv/notebooks_external/loading_raw_video_data.html">Loading Example</a>)</p></li>
</ul>
</section>
</section>
<section id="Installation">
<h2>Installation<a class="headerlink" href="#Installation" title="Permalink to this headline"></a></h2>
<section id="Environment">
<h3>Environment<a class="headerlink" href="#Environment" title="Permalink to this headline"></a></h3>
<p>To use IBL data you will need a python environment with python &gt; 3.7. To create a new environment from scratch you can install <a class="reference external" href="https://www.anaconda.com/products/distribution#download-section">anaconda</a> and follow the instructions below to create a new python environment (more information can also be found <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">here</a>)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>conda create --name ibl python=3.9
</pre></div>
</div>
<p>Make sure to always activate this environment before installing or working with the IBL data</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>conda activate ibl
</pre></div>
</div>
</section>
<section id="Install-packages">
<h3>Install packages<a class="headerlink" href="#Install-packages" title="Permalink to this headline"></a></h3>
<p>To use IBL data you will need to install ONE-api package, we also recommend install ibllib. These can be installed via pip.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">ONE</span><span class="o">-</span><span class="n">api</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">ibllib</span>
</pre></div>
</div>
</section>
<section id="Setting-up-credentials">
<h3>Setting up credentials<a class="headerlink" href="#Setting-up-credentials" title="Permalink to this headline"></a></h3>
<p>Credentials can be setup in a python terminal in the following way</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">one.api</span> <span class="kn">import</span> <span class="n">ONE</span>
<span class="n">pw</span> <span class="o">=</span> <span class="s1">&#39;international&#39;</span>
<span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://openalyx.internationalbrainlab.org&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">pw</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="Getting-Started">
<h2>Getting Started<a class="headerlink" href="#Getting-Started" title="Permalink to this headline"></a></h2>
<section id="Exploring-data">
<h3>Exploring data<a class="headerlink" href="#Exploring-data" title="Permalink to this headline"></a></h3>
<p>To get a feel for the structure of the data we recommended first downloading the alf data for a single repeated site session and exploring how the data is stored locally on disk.</p>
<p>The sessions that contain data released as part of the reproducible ephys data paper can be listed in the following way</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">one.api</span> <span class="kn">import</span> <span class="n">ONE</span>
<span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://openalyx.internationalbrainlab.org&#39;</span><span class="p">)</span>

<span class="c1"># Find sessions that have data and are tagged for the repeated site paper</span>
<span class="n">rep_site_sessions</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">alyx</span><span class="o">.</span><span class="n">rest</span><span class="p">(</span><span class="s1">&#39;sessions&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="n">dataset_types</span><span class="o">=</span><span class="s1">&#39;spikes.times&#39;</span><span class="p">,</span><span class="n">tag</span><span class="o">=</span><span class="s1">&#39;2022_Q2_IBL_et_al_RepeatedSite&#39;</span><span class="p">)</span>
<span class="n">example_sess</span> <span class="o">=</span> <span class="n">rep_site_sessions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1"># unique experiment id</span>
<span class="n">eid</span> <span class="o">=</span> <span class="n">example_sess</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>We can download all files in the <strong>alf</strong> collection in the following way</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Download all data in alf collection</span>
<span class="n">files</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_collection</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;alf&#39;</span><span class="p">,</span> <span class="n">download_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Show where files have been downloaded to</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Files downloaded to </span><span class="si">{</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>To download the spikesorting data we need to find out which probe label (probeXX above) was used for this session. This can be done by finding the probe insertions associated with the session</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">insertion</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">alyx</span><span class="o">.</span><span class="n">rest</span><span class="p">(</span><span class="s1">&#39;insertions&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">eid</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">probe_label</span> <span class="o">=</span> <span class="n">insertion</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
<span class="n">files</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_collection</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;alf/</span><span class="si">{</span><span class="n">probe_label</span><span class="si">}</span><span class="s1">/pykilosort&#39;</span><span class="p">,</span> <span class="n">download_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Show where files have been downloaded to</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Files downloaded to </span><span class="si">{</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>To load in the data we can use some of the following loading methods</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Load in all trials datasets</span>
<span class="n">trials</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_object</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;trials&#39;</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;alf&#39;</span><span class="p">)</span>

<span class="c1"># Load in a single wheel dataset</span>
<span class="n">wheel_times</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;_ibl_wheel.timestamps.npy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Advanced-example-of-navigating-the-metadata-and-filtering-data-download:-Query-data-for-a-specific-lab">
<h3>Advanced example of navigating the metadata and filtering data download: Query data for a specific lab<a class="headerlink" href="#Advanced-example-of-navigating-the-metadata-and-filtering-data-download:-Query-data-for-a-specific-lab" title="Permalink to this headline"></a></h3>
<p>If you want to use data associated to a given lab only, you could simply query for the whole dataset as shown above, and filter <code class="docutils literal notranslate"><span class="pre">rep_site_sessions</span></code> for the key “lab” of a given value, for example:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">lab_name</span> <span class="o">=</span> <span class="s1">&#39;mrsicflogellab&#39;</span>
<span class="n">sessions_lab</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">rep_site_sessions</span> <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;lab&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">lab_name</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>However, if you wanted to query only the data for a given lab, it might be most judicious to first know the list of all labs available, select an arbitrary lab name from it, and query the specific sessions from it.</p>
<p>To get this list, use the <code class="docutils literal notranslate"><span class="pre">`one.alyx.rest</span></code> API &lt;<a class="reference external" href="https://alyx.internationalbrainlab.org/docs/#labs-list">https://alyx.internationalbrainlab.org/docs/#labs-list</a>&gt;`__ :</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># List of labs (and all metadata information associated)</span>
<span class="n">labs</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">alyx</span><span class="o">.</span><span class="n">rest</span><span class="p">(</span><span class="s1">&#39;labs&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span>
                     <span class="n">django</span><span class="o">=</span><span class="s1">&#39;session__data_dataset_session_related__tags__name,2022_Q2_IBL_et_al_RepeatedSite&#39;</span><span class="p">)</span>
<span class="c1"># Note the change in the django filter compared to searching over &#39;sessions&#39;</span>

<span class="c1"># Example lab name</span>
<span class="n">lab_name</span> <span class="o">=</span> <span class="n">labs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>  <span class="c1"># e.g. &#39;mrsicflogellab&#39;</span>

<span class="c1"># Searching for RS sessions with specific lab name</span>
<span class="n">str_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;data_dataset_session_related__tags__name,2022_Q2_IBL_et_al_RepeatedSite,lab__name,</span><span class="si">{</span><span class="n">lab_name</span><span class="si">}</span><span class="s1">&#39;</span>

<span class="n">sessions_lab</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">alyx</span><span class="o">.</span><span class="n">rest</span><span class="p">(</span><span class="s1">&#39;sessions&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="n">dataset_types</span><span class="o">=</span><span class="s1">&#39;spikes.times&#39;</span><span class="p">,</span>
                             <span class="n">django</span><span class="o">=</span><span class="n">str_query</span><span class="p">)</span>

</pre></div>
</div>
</div>
</section>
<section id="More-information-on-ONE">
<h3>More information on ONE<a class="headerlink" href="#More-information-on-ONE" title="Permalink to this headline"></a></h3>
<p>To get a better understading of the ONE-api and the various methods available we recommend working through these tutorials</p>
<ul class="simple">
<li><p><a class="reference external" href="https://int-brain-lab.github.io/ONE/notebooks/one_quickstart.html">ONE quickstart</a></p></li>
<li><p><a class="reference external" href="https://int-brain-lab.github.io/ONE/notebooks/one_search/one_search.html">Searching with ONE</a></p></li>
<li><p><a class="reference external" href="https://int-brain-lab.github.io/ONE/notebooks/one_list/one_list.html">Listing with ONE</a></p></li>
<li><p><a class="reference external" href="https://int-brain-lab.github.io/ONE/notebooks/one_load/one_load.html">Loading with ONE</a></p></li>
<li><p><a class="reference external" href="https://int-brain-lab.github.io/ONE/notebooks/one_advanced/one_advanced.html">ONE alyx rest API</a> (advanced)</p></li>
</ul>
</section>
</section>
<section id="Loading-different-objects">
<h2>Loading different objects<a class="headerlink" href="#Loading-different-objects" title="Permalink to this headline"></a></h2>
<p>Examples for loading different objects can be found in the following tutorials <a class="reference external" href="https://int-brain-lab.github.io/iblenv/loading_examples.html">here</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../public_docs/public_introduction.html" class="btn btn-neutral float-left" title="Publicly available IBL data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../loading_examples.html" class="btn btn-neutral float-right" title="Loading Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, International Brain Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>