<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Datajoint Introductory Tutorial &mdash; IBL Library  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Exploring the IBL Data Pipeline" href="../dj_basics/dj_basics.html" />
    <link rel="prev" title="Get video frames and metadata" href="../../notebooks_external/docs_load_video.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> IBL Library
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The Open Neurophysiology Environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../notebooks_external/one_quickstart.html">ONE Quick Start</a></li>
<li class="toctree-l1"><a class="reference external" href="https://int-brain-lab.github.io/ONE/">Full documentation Website for ONE</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DataJoint</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dj_docs/dj_introduction.html">Introduction to DataJoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dj_docs/dj_public.html">Publicly available IBL data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dj_docs/dj_credentials.html">DataJoint credentials for internal IBL users</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Public</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../public_docs/public_introduction.html">Publicly available IBL data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../02_installation.html">Unified Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../09_contribution.html">How to contribute</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples &amp; Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../06_examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Datajoint Introductory Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dj_basics/dj_basics.html">Exploring the IBL Data Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../notebooks_external/docs_wheel_moves.html">Working with wheel data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../010_api_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Detailed Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">IBL Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Datajoint Introductory Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/notebooks/dj_intro/dj_intro.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Datajoint-Introductory-Tutorial">
<h1>Datajoint Introductory Tutorial<a class="headerlink" href="#Datajoint-Introductory-Tutorial" title="Permalink to this headline"></a></h1>
<p>In this tutorial we will use datajoint to create a simple psychometric behavior plot.</p>
<p>This tutorial assumes that you have setup the unified ibl environment <a class="reference internal" href="../../02_installation.html"><span class="doc">IBL python environment</span></a> and set up your <a class="reference internal" href="../../dj_docs/dj_credentials.html"><span class="doc">Datajoint credentials</span></a>.</p>
<p>First let’s import datajoint</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">datajoint</span> <span class="k">as</span> <span class="nn">dj</span>
<span class="c1"># for the purposes of tutorial limit the table print output to 5</span>
<span class="n">dj</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;display.limit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>
</div>
</div>
<p>We can access datajoint tables by importing schemas from the IBL-pipeline. Let’s import the <code class="docutils literal notranslate"><span class="pre">subject</span></code> schema</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">ibl_pipeline</span> <span class="kn">import</span> <span class="n">subject</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Connecting mayofaulkner@datajoint.internationalbrainlab.org:3306
</pre></div></div>
</div>
<p>Within this schema there is a datajoint table called <code class="docutils literal notranslate"><span class="pre">Subject</span></code>. This holds all the information about subjects registered on Alyx under IBL projects. Let’s access this table and look at the first couple of entries</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">subjects</span> <span class="o">=</span> <span class="n">subject</span><span class="o">.</span><span class="n">Subject</span><span class="p">()</span>
<span class="n">subjects</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>Out[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
    <style type="text/css">
        .Relation{
            border-collapse:collapse;
        }
        .Relation th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Relation td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Relation tr:nth-child(odd){
            background: #ffffff;
        }
        .Relation tr:nth-child(even){
            background: #f3f1ff;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>

    <b></b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Relation">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">subject_uuid</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_nickname</p>
                            <span class="djtooltiptext">nickname</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">sex</p>
                            <span class="djtooltiptext">sex</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_birth_date</p>
                            <span class="djtooltiptext">birth date</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">ear_mark</p>
                            <span class="djtooltiptext">ear mark</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_line</p>
                            <span class="djtooltiptext">name</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_source</p>
                            <span class="djtooltiptext">name of source</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">protocol_number</p>
                            <span class="djtooltiptext">protocol number</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_description</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_ts</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_strain</p>
                            <span class="djtooltiptext"></span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>0026c82d-39e4-4c6b-acb3-303eb4b24f05</td>
<td>IBL_32</td>
<td>M</td>
<td>2018-04-23</td>
<td>None</td>
<td>C57BL/6NCrl</td>
<td>Charles River</td>
<td>1</td>
<td>None</td>
<td>2019-08-06 21:30:42</td>
<td>C57BL/6N</td></tr><tr><td>00778394-c956-408d-8a6c-ca3b05a611d5</td>
<td>KS019</td>
<td>F</td>
<td>2019-04-30</td>
<td>None</td>
<td>C57BL/6J</td>
<td>None</td>
<td>2</td>
<td>None</td>
<td>2019-08-13 17:07:33</td>
<td>C57BL/6J</td></tr><tr><td>00c60db3-74c3-4ee2-9df9-2c84acf84e92</td>
<td>ibl_witten_10</td>
<td>F</td>
<td>2018-11-13</td>
<td>notag</td>
<td>C57BL/6J</td>
<td>Jax</td>
<td>3</td>
<td>None</td>
<td>2019-09-25 01:33:25</td>
<td>C57BL/6J</td></tr><tr><td>0124f697-16ce-4f59-b87c-e53fcb3a27ac</td>
<td>6867</td>
<td>M</td>
<td>2018-06-25</td>
<td>None</td>
<td>Thy1-GCaMP6s</td>
<td>CCU - Margarida colonies</td>
<td>1</td>
<td>None</td>
<td>2019-09-25 01:33:25</td>
<td>C57BL/6J</td></tr><tr><td>019a22c1-b944-4494-9e38-0e45ae6697bf</td>
<td>SWC_022</td>
<td>M</td>
<td>2019-06-18</td>
<td>NA (Front HP)</td>
<td>C57BL/6J</td>
<td>Charles River</td>
<td>4</td>
<td>ID: 990762</td>
<td>2019-09-25 01:33:25</td>
<td>C57BL/6J</td> </tr> </tbody>
        </table>
        <p>...</p>
        <p>Total: 1197</p></div></div>
</div>
<p>Next, we will find the entry in the table for the same subject that we looked at in the ONE tutorial, KS022. To do this we will restrict the <code class="docutils literal notranslate"><span class="pre">Subject</span></code> table by the <code class="docutils literal notranslate"><span class="pre">subject</span> <span class="pre">nickname</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">subjects</span> <span class="o">&amp;</span> <span class="s1">&#39;subject_nickname = &quot;KS022&quot;&#39;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>Out[4]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
    <style type="text/css">
        .Relation{
            border-collapse:collapse;
        }
        .Relation th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Relation td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Relation tr:nth-child(odd){
            background: #ffffff;
        }
        .Relation tr:nth-child(even){
            background: #f3f1ff;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>

    <b></b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Relation">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">subject_uuid</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_nickname</p>
                            <span class="djtooltiptext">nickname</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">sex</p>
                            <span class="djtooltiptext">sex</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_birth_date</p>
                            <span class="djtooltiptext">birth date</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">ear_mark</p>
                            <span class="djtooltiptext">ear mark</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_line</p>
                            <span class="djtooltiptext">name</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_source</p>
                            <span class="djtooltiptext">name of source</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">protocol_number</p>
                            <span class="djtooltiptext">protocol number</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_description</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_ts</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_strain</p>
                            <span class="djtooltiptext"></span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>b57c1934-f9d1-4dc4-a474-e2cb4acdf918</td>
<td>KS022</td>
<td>M</td>
<td>2019-06-25</td>
<td>None</td>
<td>C57BL/6J</td>
<td>None</td>
<td>3</td>
<td>None</td>
<td>2019-09-20 04:28:14</td>
<td>C57BL/6J</td> </tr> </tbody>
        </table>

        <p>Total: 1</p></div></div>
</div>
<p>We now want to find information about the behavioural sessions. This information is stored in a table <code class="docutils literal notranslate"><span class="pre">Session</span></code> defined in the <code class="docutils literal notranslate"><span class="pre">acquisition</span></code> schema. Let’s import this schema, access the table and display the first few entries</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">ibl_pipeline</span> <span class="kn">import</span> <span class="n">acquisition</span>
<span class="n">sessions</span> <span class="o">=</span> <span class="n">acquisition</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">sessions</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>Out[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
    <style type="text/css">
        .Relation{
            border-collapse:collapse;
        }
        .Relation th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Relation td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Relation tr:nth-child(odd){
            background: #ffffff;
        }
        .Relation tr:nth-child(even){
            background: #f3f1ff;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>

    <b></b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Relation">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">subject_uuid</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">session_start_time</p>
                            <span class="djtooltiptext">start time</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_uuid</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_number</p>
                            <span class="djtooltiptext">number</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_end_time</p>
                            <span class="djtooltiptext">end time</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_lab</p>
                            <span class="djtooltiptext">name of lab</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_location</p>
                            <span class="djtooltiptext">name of the location</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">task_protocol</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_type</p>
                            <span class="djtooltiptext">type</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_narrative</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_ts</p>
                            <span class="djtooltiptext"></span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>00778394-c956-408d-8a6c-ca3b05a611d5</td>
<td>2019-08-07 10:49:41</td>
<td>0955e23e-90cf-4250-a092-82fabdf67a24</td>
<td>1</td>
<td>2019-08-07 11:23:14</td>
<td>cortexlab</td>
<td>_iblrig_cortexlab_behavior_3</td>
<td>_iblrig_tasks_habituationChoiceWorld5.2.5</td>
<td>Experiment</td>
<td>None</td>
<td>2019-08-13 17:26:00</td></tr><tr><td>00778394-c956-408d-8a6c-ca3b05a611d5</td>
<td>2019-08-08 15:32:40</td>
<td>996167fa-07bc-4afe-b7b9-4aee0ba75c1f</td>
<td>1</td>
<td>2019-08-08 16:19:23</td>
<td>cortexlab</td>
<td>_iblrig_cortexlab_behavior_3</td>
<td>_iblrig_tasks_habituationChoiceWorld5.2.5</td>
<td>Experiment</td>
<td>None</td>
<td>2019-08-13 17:26:01</td></tr><tr><td>00778394-c956-408d-8a6c-ca3b05a611d5</td>
<td>2019-08-09 10:37:49</td>
<td>13e38e6c-0cd6-41f9-a2ab-8d6021fea035</td>
<td>1</td>
<td>2019-08-09 11:40:12</td>
<td>cortexlab</td>
<td>_iblrig_cortexlab_behavior_3</td>
<td>_iblrig_tasks_habituationChoiceWorld5.2.7</td>
<td>Experiment</td>
<td>None</td>
<td>2019-08-13 17:26:00</td></tr><tr><td>00778394-c956-408d-8a6c-ca3b05a611d5</td>
<td>2019-08-10 11:24:59</td>
<td>fb9bdf18-76be-452b-ac4e-21d5de3a6f9f</td>
<td>1</td>
<td>2019-08-10 12:11:04</td>
<td>cortexlab</td>
<td>_iblrig_cortexlab_behavior_3</td>
<td>_iblrig_tasks_trainingChoiceWorld5.2.7</td>
<td>Experiment</td>
<td>None</td>
<td>2019-08-13 17:26:06</td></tr><tr><td>00778394-c956-408d-8a6c-ca3b05a611d5</td>
<td>2019-08-12 09:21:03</td>
<td>d47e9a4c-18dc-4d4d-991c-d30059ec2cbd</td>
<td>1</td>
<td>2019-08-12 10:07:19</td>
<td>cortexlab</td>
<td>_iblrig_cortexlab_behavior_3</td>
<td>_iblrig_tasks_trainingChoiceWorld5.2.7</td>
<td>Experiment</td>
<td>None</td>
<td>2019-08-14 12:37:53</td> </tr> </tbody>
        </table>
        <p>...</p>
        <p>Total: 44723</p></div></div>
</div>
<p>If we look at the primary keys (columns with black headings) in the <code class="docutils literal notranslate"><span class="pre">Subjects</span></code> and <code class="docutils literal notranslate"><span class="pre">Sessions</span></code> table, we will notice that both contain <code class="docutils literal notranslate"><span class="pre">subject_uuid</span></code> as a primary key. This means that these two tables can be joined using *****.</p>
<p>We want to find information about all the sessions that KS022 did in the training phase of the IBL training pipeline. When combining the tables we will therefore restrict the <code class="docutils literal notranslate"><span class="pre">Subject</span></code> table by the <code class="docutils literal notranslate"><span class="pre">subject</span> <span class="pre">nickname</span></code> (as we did before) and the <code class="docutils literal notranslate"><span class="pre">Sessions</span></code> table by the <code class="docutils literal notranslate"><span class="pre">task</span> <span class="pre">protocol</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="p">(</span><span class="n">subjects</span> <span class="o">&amp;</span> <span class="s1">&#39;subject_nickname = &quot;KS022&quot;&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">sessions</span> <span class="o">&amp;</span> <span class="s1">&#39;task_protocol LIKE &quot;%training%&quot;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>Out[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
    <style type="text/css">
        .Relation{
            border-collapse:collapse;
        }
        .Relation th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Relation td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Relation tr:nth-child(odd){
            background: #ffffff;
        }
        .Relation tr:nth-child(even){
            background: #f3f1ff;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>


        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Relation">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">subject_uuid</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">session_start_time</p>
                            <span class="djtooltiptext">start time</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_nickname</p>
                            <span class="djtooltiptext">nickname</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">sex</p>
                            <span class="djtooltiptext">sex</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_birth_date</p>
                            <span class="djtooltiptext">birth date</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">ear_mark</p>
                            <span class="djtooltiptext">ear mark</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_line</p>
                            <span class="djtooltiptext">name</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_source</p>
                            <span class="djtooltiptext">name of source</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">protocol_number</p>
                            <span class="djtooltiptext">protocol number</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_description</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_ts</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_strain</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_uuid</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_number</p>
                            <span class="djtooltiptext">number</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_end_time</p>
                            <span class="djtooltiptext">end time</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_lab</p>
                            <span class="djtooltiptext">name of lab</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_location</p>
                            <span class="djtooltiptext">name of the location</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">task_protocol</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_type</p>
                            <span class="djtooltiptext">type</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_narrative</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_ts</p>
                            <span class="djtooltiptext"></span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>b57c1934-f9d1-4dc4-a474-e2cb4acdf918</td>
<td>2019-09-23 13:43:40</td>
<td>KS022</td>
<td>M</td>
<td>2019-06-25</td>
<td>None</td>
<td>C57BL/6J</td>
<td>None</td>
<td>3</td>
<td>None</td>
<td>2019-09-20 04:28:14</td>
<td>C57BL/6J</td>
<td>242ed7aa-6e02-4d55-b003-874b71357074</td>
<td>1</td>
<td>2019-09-23 14:28:22</td>
<td>cortexlab</td>
<td>_iblrig_cortexlab_behavior_3</td>
<td>_iblrig_tasks_trainingChoiceWorld5.3.0</td>
<td>Experiment</td>
<td>None</td>
<td>2019-09-24 04:51:41</td></tr><tr><td>b57c1934-f9d1-4dc4-a474-e2cb4acdf918</td>
<td>2019-09-24 10:41:18</td>
<td>KS022</td>
<td>M</td>
<td>2019-06-25</td>
<td>None</td>
<td>C57BL/6J</td>
<td>None</td>
<td>3</td>
<td>None</td>
<td>2019-09-20 04:28:14</td>
<td>C57BL/6J</td>
<td>be7f7832-006f-4f79-8079-6dea549c90c0</td>
<td>1</td>
<td>2019-09-24 11:27:11</td>
<td>cortexlab</td>
<td>_iblrig_cortexlab_behavior_3</td>
<td>_iblrig_tasks_trainingChoiceWorld5.3.0</td>
<td>Experiment</td>
<td>None</td>
<td>2019-09-25 04:51:58</td></tr><tr><td>b57c1934-f9d1-4dc4-a474-e2cb4acdf918</td>
<td>2019-09-25 09:37:26</td>
<td>KS022</td>
<td>M</td>
<td>2019-06-25</td>
<td>None</td>
<td>C57BL/6J</td>
<td>None</td>
<td>3</td>
<td>None</td>
<td>2019-09-20 04:28:14</td>
<td>C57BL/6J</td>
<td>c4f55950-26ac-4cb6-be38-57d9e604f5fc</td>
<td>1</td>
<td>2019-09-25 10:23:20</td>
<td>cortexlab</td>
<td>_iblrig_cortexlab_behavior_3</td>
<td>_iblrig_tasks_trainingChoiceWorld5.3.0</td>
<td>Experiment</td>
<td>None</td>
<td>2019-09-26 04:53:06</td></tr><tr><td>b57c1934-f9d1-4dc4-a474-e2cb4acdf918</td>
<td>2019-09-26 14:43:24</td>
<td>KS022</td>
<td>M</td>
<td>2019-06-25</td>
<td>None</td>
<td>C57BL/6J</td>
<td>None</td>
<td>3</td>
<td>None</td>
<td>2019-09-20 04:28:14</td>
<td>C57BL/6J</td>
<td>39a0993b-ea91-4d7d-aa8b-84365ae77a81</td>
<td>1</td>
<td>2019-09-26 15:31:48</td>
<td>cortexlab</td>
<td>_iblrig_cortexlab_behavior_3</td>
<td>_iblrig_tasks_trainingChoiceWorld5.3.0</td>
<td>Experiment</td>
<td>None</td>
<td>2019-09-27 04:53:22</td></tr><tr><td>b57c1934-f9d1-4dc4-a474-e2cb4acdf918</td>
<td>2019-09-27 10:21:16</td>
<td>KS022</td>
<td>M</td>
<td>2019-06-25</td>
<td>None</td>
<td>C57BL/6J</td>
<td>None</td>
<td>3</td>
<td>None</td>
<td>2019-09-20 04:28:14</td>
<td>C57BL/6J</td>
<td>f1eb053b-3cc2-45df-bbd5-2f5f54f05d23</td>
<td>1</td>
<td>2019-09-27 11:06:09</td>
<td>cortexlab</td>
<td>_iblrig_cortexlab_behavior_3</td>
<td>_iblrig_tasks_trainingChoiceWorld5.3.0</td>
<td>Experiment</td>
<td>None</td>
<td>2019-09-28 04:53:37</td> </tr> </tbody>
        </table>
        <p>...</p>
        <p>Total: 19</p></div></div>
</div>
<p>There is a lot of information in this table and we are not interested in all of it for the purposes of our analysis. Let’s just use the <strong>proj</strong> method to restrict the data presented. We do not want any columns from the <code class="docutils literal notranslate"><span class="pre">Subject</span></code> table (apart from the primary keys) and only want <code class="docutils literal notranslate"><span class="pre">session_uuid</span></code> from the <code class="docutils literal notranslate"><span class="pre">Sesssions</span> <span class="pre">table</span></code>. So we can write,</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="p">((</span><span class="n">subjects</span> <span class="o">&amp;</span> <span class="s1">&#39;subject_nickname = &quot;KS022&quot;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">proj</span><span class="p">()</span> <span class="o">*</span>
 <span class="p">(</span><span class="n">sessions</span> <span class="o">&amp;</span> <span class="s1">&#39;task_protocol LIKE &quot;%training%&quot;&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">proj</span><span class="p">(</span><span class="s1">&#39;session_uuid&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>Out[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
    <style type="text/css">
        .Relation{
            border-collapse:collapse;
        }
        .Relation th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Relation td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Relation tr:nth-child(odd){
            background: #ffffff;
        }
        .Relation tr:nth-child(even){
            background: #f3f1ff;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>


        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Relation">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">subject_uuid</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">session_start_time</p>
                            <span class="djtooltiptext">start time</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">session_uuid</p>
                            <span class="djtooltiptext"></span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>b57c1934-f9d1-4dc4-a474-e2cb4acdf918</td>
<td>2019-09-23 13:43:40</td>
<td>242ed7aa-6e02-4d55-b003-874b71357074</td></tr><tr><td>b57c1934-f9d1-4dc4-a474-e2cb4acdf918</td>
<td>2019-09-24 10:41:18</td>
<td>be7f7832-006f-4f79-8079-6dea549c90c0</td></tr><tr><td>b57c1934-f9d1-4dc4-a474-e2cb4acdf918</td>
<td>2019-09-25 09:37:26</td>
<td>c4f55950-26ac-4cb6-be38-57d9e604f5fc</td></tr><tr><td>b57c1934-f9d1-4dc4-a474-e2cb4acdf918</td>
<td>2019-09-26 14:43:24</td>
<td>39a0993b-ea91-4d7d-aa8b-84365ae77a81</td></tr><tr><td>b57c1934-f9d1-4dc4-a474-e2cb4acdf918</td>
<td>2019-09-27 10:21:16</td>
<td>f1eb053b-3cc2-45df-bbd5-2f5f54f05d23</td> </tr> </tbody>
        </table>
        <p>...</p>
        <p>Total: 19</p></div></div>
</div>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">Note</p>
<p>In the above expression we first used <strong>proj</strong> and then joined the tables using ** * <strong>. We could have also joined the tables first and then used</strong>proj**,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> ((subjects &amp; &#39;subject_nickname = &quot;KS022&quot;&#39;) * (sessions &amp; &#39;task_protocol LIKE &quot;%training%&quot;&#39;)
).proj(&#39;session_uuid&#39;)
</pre></div>
</div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">session_uuid</span></code> corresponds to the <a class="reference external" href="https://int-brain-lab.github.io/ONE/notebooks/experiment_ids.html">eID string in ONE</a>.</p>
<p>Up until now we have been inspecting the content of the tables but do not actually have access to the content. This is because we have not actually read the data from the tables into memory yet. For this we would need to use the <strong>fetch</strong> command. Let’s fetch the <code class="docutils literal notranslate"><span class="pre">session</span> <span class="pre">uuid</span></code> information into a pandas dataframe</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eids</span> <span class="o">=</span> <span class="p">((</span><span class="n">subjects</span> <span class="o">&amp;</span> <span class="s1">&#39;subject_nickname = &quot;KS022&quot;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">proj</span><span class="p">()</span> <span class="o">*</span>
        <span class="p">(</span><span class="n">sessions</span> <span class="o">&amp;</span> <span class="s1">&#39;task_protocol LIKE &quot;%training%&quot;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">proj</span><span class="p">(</span><span class="s1">&#39;session_uuid&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;frame&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eids</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>Out[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>session_uuid</th>
    </tr>
    <tr>
      <th>subject_uuid</th>
      <th>session_start_time</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="19" valign="top">b57c1934-f9d1-4dc4-a474-e2cb4acdf918</th>
      <th>2019-09-23 13:43:40</th>
      <td>242ed7aa-6e02-4d55-b003-874b71357074</td>
    </tr>
    <tr>
      <th>2019-09-24 10:41:18</th>
      <td>be7f7832-006f-4f79-8079-6dea549c90c0</td>
    </tr>
    <tr>
      <th>2019-09-25 09:37:26</th>
      <td>c4f55950-26ac-4cb6-be38-57d9e604f5fc</td>
    </tr>
    <tr>
      <th>2019-09-26 14:43:24</th>
      <td>39a0993b-ea91-4d7d-aa8b-84365ae77a81</td>
    </tr>
    <tr>
      <th>2019-09-27 10:21:16</th>
      <td>f1eb053b-3cc2-45df-bbd5-2f5f54f05d23</td>
    </tr>
    <tr>
      <th>2019-10-01 11:01:44</th>
      <td>a07e255f-cf31-47aa-9667-5c62b93443e0</td>
    </tr>
    <tr>
      <th>2019-10-02 10:02:36</th>
      <td>fc7b7ea7-55c4-48fd-bb7b-2422c741fe8e</td>
    </tr>
    <tr>
      <th>2019-10-03 14:15:32</th>
      <td>22f33af3-5e77-4517-94b9-2cfefea27a10</td>
    </tr>
    <tr>
      <th>2019-10-04 10:52:19</th>
      <td>7e508dce-e08c-4481-b634-1a9358673aa5</td>
    </tr>
    <tr>
      <th>2019-10-07 10:59:27</th>
      <td>548ca39d-8898-460c-a930-785083b4127d</td>
    </tr>
    <tr>
      <th>2019-10-08 11:19:34</th>
      <td>3f815a05-a114-4a16-96ef-b398bd5a0b88</td>
    </tr>
    <tr>
      <th>2019-10-10 11:00:46</th>
      <td>f6c9daee-3e1e-4a5d-b372-7be8fcda5512</td>
    </tr>
    <tr>
      <th>2019-10-11 11:01:47</th>
      <td>2f7e07d4-d713-46a1-8bce-6b497af405fc</td>
    </tr>
    <tr>
      <th>2019-10-14 11:30:31</th>
      <td>228b29b2-fb77-40c9-bd32-953fd5297896</td>
    </tr>
    <tr>
      <th>2019-10-15 10:32:56</th>
      <td>9ee8bd6b-1e5e-4440-bc2e-7c001abe7b60</td>
    </tr>
    <tr>
      <th>2019-10-17 11:32:30</th>
      <td>777ecfb9-616f-4ff9-a8d9-eb38f897a19f</td>
    </tr>
    <tr>
      <th>2019-10-18 11:52:53</th>
      <td>4e626e22-747e-4324-96f1-9827b7ca950d</td>
    </tr>
    <tr>
      <th>2019-10-21 11:44:49</th>
      <td>dd4ad209-fcff-4252-9e38-44cba17f7603</td>
    </tr>
    <tr>
      <th>2019-10-22 11:48:05</th>
      <td>b4ac5904-5693-4d98-adb3-362e612836be</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Now that we have access to our list of session eIDs, we can get trial information associated with these sessions. The output from the trials dataset is stored in a table called <code class="docutils literal notranslate"><span class="pre">PyschResults</span></code>. We can import this from the <code class="docutils literal notranslate"><span class="pre">analyses.behaviour</span></code> schema</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">ibl_pipeline.analyses</span> <span class="kn">import</span> <span class="n">behavior</span>
<span class="n">trials</span> <span class="o">=</span> <span class="n">behavior</span><span class="o">.</span><span class="n">PsychResults</span><span class="p">()</span>
<span class="n">trials</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
C:\Users\Mayo\iblenv\IBL-pipeline\ibl_pipeline\behavior.py:14: UserWarning: ONE not installed, cannot use populate
  warnings.warn(&#39;ONE not installed, cannot use populate&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>Out[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
    <style type="text/css">
        .Relation{
            border-collapse:collapse;
        }
        .Relation th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Relation td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Relation tr:nth-child(odd){
            background: #ffffff;
        }
        .Relation tr:nth-child(even){
            background: #f3f1ff;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>

    <b></b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Relation">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">subject_uuid</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">session_start_time</p>
                            <span class="djtooltiptext">start time</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">performance</p>
                            <span class="djtooltiptext">percentage correct in this session</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">performance_easy</p>
                            <span class="djtooltiptext">percentage correct of easy trials in this session</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">signed_contrasts</p>
                            <span class="djtooltiptext">contrasts used in this session, negative when on the left</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">n_trials_stim</p>
                            <span class="djtooltiptext">number of trials for each contrast</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">n_trials_stim_right</p>
                            <span class="djtooltiptext">number of reporting "right" trials for each contrast</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">prob_choose_right</p>
                            <span class="djtooltiptext">probability of choosing right, same size as contrasts</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">threshold</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">bias</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">lapse_low</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">lapse_high</p>
                            <span class="djtooltiptext"></span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>00778394-c956-408d-8a6c-ca3b05a611d5</td>
<td>2019-08-10 11:24:59</td>
<td>0.367347</td>
<td>0.367347</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>29.7063</td>
<td>-58.2102</td>
<td>0.823603</td>
<td>0.409092</td></tr><tr><td>00778394-c956-408d-8a6c-ca3b05a611d5</td>
<td>2019-08-12 09:21:03</td>
<td>0.4</td>
<td>0.4</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>21.0607</td>
<td>-58.2391</td>
<td>0.609229</td>
<td>0.181818</td></tr><tr><td>00778394-c956-408d-8a6c-ca3b05a611d5</td>
<td>2019-08-13 10:28:45</td>
<td>0.408072</td>
<td>0.408072</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>9.4945</td>
<td>-0.13251</td>
<td>0.684564</td>
<td>0.364865</td></tr><tr><td>00778394-c956-408d-8a6c-ca3b05a611d5</td>
<td>2019-08-14 09:37:17</td>
<td>0.4</td>
<td>0.4</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>3.28746</td>
<td>-67.9662</td>
<td>0.772727</td>
<td>0.454545</td></tr><tr><td>00778394-c956-408d-8a6c-ca3b05a611d5</td>
<td>2019-08-14 11:35:16</td>
<td>0.463668</td>
<td>0.463668</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>10.4665</td>
<td>99.3649</td>
<td>0.72314</td>
<td>0.0373897</td> </tr> </tbody>
        </table>
        <p>...</p>
        <p>Total: 38170</p></div></div>
</div>
<p>Let’s get the trial information for the first day KS022 trained. We will restrict the <code class="docutils literal notranslate"><span class="pre">Sessions</span></code> table by the day 1 eID and combine this with the <code class="docutils literal notranslate"><span class="pre">trials</span></code> table</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eid_day1</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">session_uuid</span><span class="o">=</span><span class="n">eids</span><span class="p">[</span><span class="s1">&#39;session_uuid&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="n">trials_day1</span> <span class="o">=</span> <span class="p">((</span><span class="n">sessions</span> <span class="o">&amp;</span> <span class="n">eid_day1</span><span class="p">)</span><span class="o">.</span><span class="n">proj</span><span class="p">()</span> <span class="o">*</span> <span class="n">trials</span><span class="p">)</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;frame&#39;</span><span class="p">)</span>
<span class="n">trials_day1</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>Out[11]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>performance</th>
      <th>performance_easy</th>
      <th>signed_contrasts</th>
      <th>n_trials_stim</th>
      <th>n_trials_stim_right</th>
      <th>prob_choose_right</th>
      <th>threshold</th>
      <th>bias</th>
      <th>lapse_low</th>
      <th>lapse_high</th>
    </tr>
    <tr>
      <th>subject_uuid</th>
      <th>session_start_time</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>b57c1934-f9d1-4dc4-a474-e2cb4acdf918</th>
      <th>2019-09-23 13:43:40</th>
      <td>0.515432</td>
      <td>0.515432</td>
      <td>[-1.0, -0.5, 0.5, 1.0]</td>
      <td>[81, 90, 73, 80]</td>
      <td>[41, 51, 50, 38]</td>
      <td>[0.5061728395061729, 0.5666666666666667, 0.684...</td>
      <td>7.23087</td>
      <td>86.8559</td>
      <td>0.581967</td>
      <td>0.525546</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Notice how a lot of the metrics that we manually computed from the trials dataset in the previous ONE tutorial have already been computed for us and are available in the <code class="docutils literal notranslate"><span class="pre">trials</span></code> table. This is one advantage of Datajoint, common computations such as performance can be computed when the data is ingested and stored in tables.</p>
<p>We can find out which visual stimulus contrasts were presented to KS022 on day 1 and how many of each contrast by looking at the <code class="docutils literal notranslate"><span class="pre">signed_contrasts</span></code> and <code class="docutils literal notranslate"><span class="pre">n_trials_stim</span></code> attributes</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">contrasts</span> <span class="o">=</span> <span class="n">trials_day1</span><span class="p">[</span><span class="s1">&#39;signed_contrasts&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">n_contrasts</span> <span class="o">=</span> <span class="n">trials_day1</span><span class="p">[</span><span class="s1">&#39;n_trials_stim&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Visual stimulus contrasts on day 1 = </span><span class="si">{</span><span class="n">contrasts</span> <span class="o">*</span> <span class="mi">100</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No. of each contrast on day 1 = </span><span class="si">{</span><span class="n">n_contrasts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Visual stimulus contrasts on day 1 = [-100.  -50.   50.  100.]
No. of each contrast on day 1 = [81 90 73 80]
</pre></div></div>
</div>
<p>We can easily extract the performance by typing</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Correct = </span><span class="si">{</span> <span class="n">trials_day1</span><span class="p">[</span><span class="s1">&#39;performance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="si">}</span><span class="s2"> %&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Correct = 51.5432 %
</pre></div></div>
</div>
<p>We can plot the peformance at each contrast by looking at the <code class="docutils literal notranslate"><span class="pre">prob_choose_right</span></code> attribute. The results stored in Datajoint are already expressed in terms of rightward choice, so we don’t need worry about converting any computations</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">contrast_performance</span> <span class="o">=</span> <span class="n">trials_day1</span><span class="p">[</span><span class="s1">&#39;prob_choose_right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">contrasts</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="n">contrast_performance</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;o-&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([</span><span class="o">*</span><span class="p">(</span><span class="n">contrasts</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Signed contrast (%)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Rightward choice (%)&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">contrast_performance</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[0.50617284 0.56666667 0.68493151 0.475     ]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_dj_intro_dj_intro_28_1.png" src="../../_images/notebooks_dj_intro_dj_intro_28_1.png" />
</div>
</div>
<p>Let’s now repeat this for day 15 of training</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">eid_day15</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">session_uuid</span><span class="o">=</span><span class="n">eids</span><span class="p">[</span><span class="s1">&#39;session_uuid&#39;</span><span class="p">][</span><span class="mi">14</span><span class="p">])</span>
<span class="n">trials_day15</span> <span class="o">=</span> <span class="p">((</span><span class="n">sessions</span> <span class="o">&amp;</span> <span class="n">eid_day15</span><span class="p">)</span><span class="o">.</span><span class="n">proj</span><span class="p">()</span> <span class="o">*</span> <span class="n">trials</span><span class="p">)</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;frame&#39;</span><span class="p">)</span>
<span class="n">contrasts</span> <span class="o">=</span> <span class="n">trials_day15</span><span class="p">[</span><span class="s1">&#39;signed_contrasts&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">n_contrasts</span> <span class="o">=</span> <span class="n">trials_day15</span><span class="p">[</span><span class="s1">&#39;n_trials_stim&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Visual stimulus contrasts on day 1 = </span><span class="si">{</span><span class="n">contrasts</span> <span class="o">*</span> <span class="mi">100</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No. of each contrast on day 1 = </span><span class="si">{</span><span class="n">n_contrasts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Visual stimulus contrasts on day 1 = [-100.   -50.   -25.   -12.5   12.5   25.    50.   100. ]
No. of each contrast on day 1 = [ 94  65 107  16  21  75  78  64]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Correct = </span><span class="si">{</span> <span class="n">trials_day15</span><span class="p">[</span><span class="s1">&#39;performance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="si">}</span><span class="s2"> %&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Correct = 88.2692 %
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">contrast_performance</span> <span class="o">=</span> <span class="n">trials_day15</span><span class="p">[</span><span class="s1">&#39;prob_choose_right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">contrasts</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="n">contrast_performance</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;o-&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([</span><span class="o">*</span><span class="p">(</span><span class="n">contrasts</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Signed contrast (%)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Rightward choice (%)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">contrast_performance</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[0.09574468 0.12307692 0.22429907 0.1875     1.         0.93333333
 0.91025641 0.921875  ]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_dj_intro_dj_intro_32_1.png" src="../../_images/notebooks_dj_intro_dj_intro_32_1.png" />
</div>
</div>
<p>If we compare the results with the ONE tutorial, we will find that we have replicated those results using Datajoint, congratulations!</p>
<p>You should now be comfortable with the basics of exploring the Datajoint IBL pipeline. More Datajoint tutorials can be found in the <a class="reference external" href="https://github.com/int-brain-lab/IBL-pipeline/tree/master/notebooks/notebooks_tutorial">IBL-Pipeline github</a> or on the <a class="reference external" href="https://jupyter.internationalbrainlab.org/">Datajoint jupyter</a>.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../notebooks_external/docs_load_video.html" class="btn btn-neutral float-left" title="Get video frames and metadata" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../dj_basics/dj_basics.html" class="btn btn-neutral float-right" title="Exploring the IBL Data Pipeline" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, International Brain Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>