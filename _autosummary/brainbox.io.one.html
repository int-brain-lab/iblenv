<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>brainbox.io.one &mdash; IBL Library  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/css/style.css?v=17142d56" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="brainbox.io.spikeglx" href="brainbox.io.spikeglx.html" />
    <link rel="prev" title="brainbox.io" href="brainbox.io.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            IBL Library
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The Open Neurophysiology Environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/one_quickstart.html">ONE Quick Start</a></li>
<li class="toctree-l1"><a class="reference external" href="https://int-brain-lab.github.io/ONE/">Full documentation Website for ONE</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Public</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/public_introduction.html">Publicly available IBL data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_behavior.html">Data Release - Behavior</a></li>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/data_release_pilot.html">Data Release - Pilot Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_repro_ephys.html">Data Release - Reproducible Ephys Paper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_brainwidemap.html">Data Release - Brain Wide Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_spikesorting_benchmarks.html">Data Release - Spike sorting benchmark datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/information_contact.html">Information and troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Exploring IBL Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_structure.html">Get to know the datasets and folder structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_download.html">Download the public datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../loading_examples.html">Loading Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../02_installation.html">Unified Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_contribution.html">How to contribute</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples &amp; Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../atlas_examples.html">Atlas Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/docs_wheel_moves.html">Working with wheel data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../010_api_reference.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ibllib.html">ibllib</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="brainbox.html">brainbox</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="brainbox.atlas.html">brainbox.atlas</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.behavior.html">brainbox.behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.core.html">brainbox.core</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.ephys_plots.html">brainbox.ephys_plots</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="brainbox.io.html">brainbox.io</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">brainbox.io.one</a></li>
<li class="toctree-l4"><a class="reference internal" href="brainbox.io.spikeglx.html">brainbox.io.spikeglx</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.lfp.html">brainbox.lfp</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.metrics.html">brainbox.metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.plot.html">brainbox.plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.plot_base.html">brainbox.plot_base</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.population.html">brainbox.population</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.processing.html">brainbox.processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.quality.html">brainbox.quality</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.singlecell.html">brainbox.singlecell</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.spike_features.html">brainbox.spike_features</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.task.html">brainbox.task</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.tests.html">brainbox.tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.video.html">brainbox.video</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="iblatlas.html">iblatlas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBL Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../010_api_reference.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="brainbox.html">brainbox</a></li>
          <li class="breadcrumb-item"><a href="brainbox.io.html">brainbox.io</a></li>
      <li class="breadcrumb-item active">brainbox.io.one</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/brainbox.io.one.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-brainbox.io.one">
<span id="brainbox-io-one"></span><h1>brainbox.io.one<a class="headerlink" href="#module-brainbox.io.one" title="Link to this heading"></a></h1>
<p>Functions for loading IBL ephys and trial data using the Open Neurophysiology Environment.</p>
<p class="rubric">Functions</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.io.one.channel_locations_interpolation" title="brainbox.io.one.channel_locations_interpolation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">channel_locations_interpolation</span></code></a></p></td>
<td><p>oftentimes the channel map for different spike sorters may be different so interpolate the alignment onto if there is no spike sorting in the base folder, the alignment doesn't have the localCoordinates field so we reconstruct from the Neuropixel map.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.io.one.load_channel_locations" title="brainbox.io.one.load_channel_locations"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_channel_locations</span></code></a></p></td>
<td><p>Load the brain locations of each channel for a given session/probe</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.io.one.load_channels_from_insertion" title="brainbox.io.one.load_channels_from_insertion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_channels_from_insertion</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.io.one.load_ephys_session" title="brainbox.io.one.load_ephys_session"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_ephys_session</span></code></a></p></td>
<td><p>From an eid, hits the Alyx database and downloads a standard default set of dataset types From a local session Path (pathlib.Path), loads a standard default set of dataset types  to perform analysis:     'clusters.channels',     'clusters.depths',     'clusters.metrics',     'spikes.clusters',     'spikes.times',     'probes.description'</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.io.one.load_iti" title="brainbox.io.one.load_iti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_iti</span></code></a></p></td>
<td><p>The inter-trial interval (ITI) time for each trial, defined as the period of open-loop grey screen commencing at stimulus off and lasting until the quiescent period at the start of the following trial.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.io.one.load_lfp" title="brainbox.io.one.load_lfp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_lfp</span></code></a></p></td>
<td><p>TODO Verify works From an eid, hits the Alyx database and downloads the standard set of datasets needed for LFP</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.io.one.load_passive_rfmap" title="brainbox.io.one.load_passive_rfmap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_passive_rfmap</span></code></a></p></td>
<td><p>For a given eid load in the passive receptive field mapping protocol data</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.io.one.load_spike_sorting" title="brainbox.io.one.load_spike_sorting"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_spike_sorting</span></code></a></p></td>
<td><p>From an eid, loads spikes and clusters for all probes The following set of dataset types are loaded:     'clusters.channels',     'clusters.depths',     'clusters.metrics',     'spikes.clusters',     'spikes.times',     'probes.description'</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.io.one.load_spike_sorting_fast" title="brainbox.io.one.load_spike_sorting_fast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_spike_sorting_fast</span></code></a></p></td>
<td><p>From an eid, loads spikes and clusters for all probes The following set of dataset types are loaded:     'clusters.channels',     'clusters.depths',     'clusters.metrics',     'spikes.clusters',     'spikes.times',     'probes.description'</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.io.one.load_spike_sorting_with_channel" title="brainbox.io.one.load_spike_sorting_with_channel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_spike_sorting_with_channel</span></code></a></p></td>
<td><p>For a given eid, get spikes, clusters and channels information, and merges clusters and channels information before returning all three variables.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.io.one.load_wheel_reaction_times" title="brainbox.io.one.load_wheel_reaction_times"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_wheel_reaction_times</span></code></a></p></td>
<td><p>Return the calculated reaction times for session.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.io.one.merge_clusters_channels" title="brainbox.io.one.merge_clusters_channels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">merge_clusters_channels</span></code></a></p></td>
<td><p>Takes (default and any extra) values in given keys from channels and assign them to clusters.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.io.one.EphysSessionLoader" title="brainbox.io.one.EphysSessionLoader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EphysSessionLoader</span></code></a></p></td>
<td><p>Spike sorting enhanced version of SessionLoader Loads spike sorting data for all probes in the session, in the self.ephys dict &gt;&gt;&gt; EphysSessionLoader(eid=eid, one=one) To select for a specific probe &gt;&gt;&gt; EphysSessionLoader(eid=eid, one=one, pid=pid)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.io.one.SessionLoader" title="brainbox.io.one.SessionLoader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SessionLoader</span></code></a></p></td>
<td><p>Object to load session data for a give session in the recommended way.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.io.one.SpikeSortingLoader" title="brainbox.io.one.SpikeSortingLoader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SpikeSortingLoader</span></code></a></p></td>
<td><p>Object that will load spike sorting data for a given probe insertion. This class can be instantiated in several manners - With Alyx database probe id:         SpikeSortingLoader(pid=pid, one=one) - With Alyx database eic and probe name:         SpikeSortingLoader(eid=eid, pname='probe00', one=one) - From a local session and probe name:         SpikeSortingLoader(session_path=session_path, pname='probe00') NB: When no ONE instance is passed, any datasets that are loaded will not be recorded.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="brainbox.io.one.load_lfp">
<span class="sig-name descname"><span class="pre">load_lfp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#load_lfp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.load_lfp" title="Link to this definition"></a></dt>
<dd><p>TODO Verify works
From an eid, hits the Alyx database and downloads the standard set of datasets
needed for LFP</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> – </p></li>
<li><p><strong>dataset_types</strong> – additional dataset types to add to the list</p></li>
<li><p><strong>open</strong> – if True, spikeglx readers are opened</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>spikeglx.Reader</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.io.one.channel_locations_interpolation">
<span class="sig-name descname"><span class="pre">channel_locations_interpolation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channels_aligned</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">brain_regions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#channel_locations_interpolation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.channel_locations_interpolation" title="Link to this definition"></a></dt>
<dd><p>oftentimes the channel map for different spike sorters may be different so interpolate the alignment onto
if there is no spike sorting in the base folder, the alignment doesn’t have the localCoordinates field
so we reconstruct from the Neuropixel map. This only happens for early pykilosort sorts</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>channels_aligned</strong> – <p>Bunch or dictionary of aligned channels containing at least keys
‘localCoordinates’, ‘mlapdv’ and ‘brainLocationIds_ccf_2017’
OR</p>
<blockquote>
<div><p>’x’, ‘y’, ‘z’, ‘acronym’, ‘axial_um’
those are the guide for the interpolation</p>
</div></blockquote>
</p></li>
<li><p><strong>channels</strong> – Bunch or dictionary of aligned channels containing at least keys ‘localCoordinates’</p></li>
<li><p><strong>brain_regions</strong> – <p>None (default) or iblatlas.regions.BrainRegions object
if None will return a dict with keys ‘localCoordinates’, ‘mlapdv’, ‘brainLocationIds_ccf_2017
if a brain region object is provided, outputts a dict with keys</p>
<blockquote>
<div><p>’x’, ‘y’, ‘z’, ‘acronym’, ‘atlas_id’, ‘axial_um’, ‘lateral_um’</p>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Bunch or dictionary of channels with brain coordinates keys</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.io.one.load_channel_locations">
<span class="sig-name descname"><span class="pre">load_channel_locations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aligned</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">brain_atlas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#load_channel_locations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.load_channel_locations" title="Link to this definition"></a></dt>
<dd><p>Load the brain locations of each channel for a given session/probe</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>[</em><em>str</em><em>, </em><em>UUID</em><em>, </em><em>Path</em><em>, </em><em>dict</em><em>]</em>) – Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path</p></li>
<li><p><strong>probe</strong> (<em>[</em><em>str</em><em>, </em><em>list</em><em> of </em><em>str</em><em>]</em>) – The probe label(s), e.g. ‘probe01’</p></li>
<li><p><strong>one</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.api.html#one.api.OneAlyx" title="(in ONE)"><em>one.api.OneAlyx</em></a>) – An instance of ONE (shouldn’t be in ‘local’ mode)</p></li>
<li><p><strong>aligned</strong> (<em>bool</em>) – Whether to get the latest user aligned channel when not resolved or use histology track</p></li>
<li><p><strong>brain_atlas</strong> (<em>iblatlas.BrainAtlas</em>) – Brain atlas object (default: Allen atlas)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>dict of one.alf.io.AlfBunch</em> – A dict with probe labels as keys, contains channel locations with keys (‘acronym’,
‘atlas_id’, ‘x’, ‘y’, ‘z’).  Atlas IDs non-lateralized.</p></li>
<li><p><strong>optional</strong> (<em>string ‘resolved’, ‘aligned’, ‘traced’ or ‘’</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.io.one.load_spike_sorting_fast">
<span class="sig-name descname"><span class="pre">load_spike_sorting_fast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spike_sorter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">brain_regions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nested</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#load_spike_sorting_fast"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.load_spike_sorting_fast" title="Link to this definition"></a></dt>
<dd><p>From an eid, loads spikes and clusters for all probes
The following set of dataset types are loaded:</p>
<blockquote>
<div><p>‘clusters.channels’,
‘clusters.depths’,
‘clusters.metrics’,
‘spikes.clusters’,
‘spikes.times’,
‘probes.description’</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> – experiment UUID or pathlib.Path of the local session</p></li>
<li><p><strong>one</strong> – an instance of OneAlyx</p></li>
<li><p><strong>probe</strong> – name of probe to load in, if not given all probes for session will be loaded</p></li>
<li><p><strong>dataset_types</strong> – additional spikes/clusters objects to add to the standard default list</p></li>
<li><p><strong>spike_sorter</strong> – name of the spike sorting you want to load (None for default)</p></li>
<li><p><strong>collection</strong> – name of the spike sorting collection to load - exclusive with spike sorter name ex: “alf/probe00”</p></li>
<li><p><strong>brain_regions</strong> – iblatlas.regions.BrainRegions object - will label acronyms if provided</p></li>
<li><p><strong>nested</strong> – if a single probe is required, do not output a dictionary with the probe name as key</p></li>
<li><p><strong>return_collection</strong> – (False) if True, will return the collection used to load</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>spikes, clusters, channels (dict of bunch, 1 bunch per probe)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.io.one.load_spike_sorting">
<span class="sig-name descname"><span class="pre">load_spike_sorting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spike_sorter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">brain_regions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#load_spike_sorting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.load_spike_sorting" title="Link to this definition"></a></dt>
<dd><p>From an eid, loads spikes and clusters for all probes
The following set of dataset types are loaded:</p>
<blockquote>
<div><p>‘clusters.channels’,
‘clusters.depths’,
‘clusters.metrics’,
‘spikes.clusters’,
‘spikes.times’,
‘probes.description’</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> – experiment UUID or pathlib.Path of the local session</p></li>
<li><p><strong>one</strong> – an instance of OneAlyx</p></li>
<li><p><strong>probe</strong> – name of probe to load in, if not given all probes for session will be loaded</p></li>
<li><p><strong>dataset_types</strong> – additional spikes/clusters objects to add to the standard default list</p></li>
<li><p><strong>spike_sorter</strong> – name of the spike sorting you want to load (None for default)</p></li>
<li><p><strong>brain_regions</strong> – iblatlas.regions.BrainRegions object - will label acronyms if provided</p></li>
</ul>
</dd>
</dl>
<p>:param return_collection:(bool - False) if True, returns the collection for loading the data
:return: spikes, clusters (dict of bunch, 1 bunch per probe)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.io.one.load_spike_sorting_with_channel">
<span class="sig-name descname"><span class="pre">load_spike_sorting_with_channel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aligned</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spike_sorter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">brain_atlas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nested</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#load_spike_sorting_with_channel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.load_spike_sorting_with_channel" title="Link to this definition"></a></dt>
<dd><p>For a given eid, get spikes, clusters and channels information, and merges clusters
and channels information before returning all three variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>[</em><em>str</em><em>, </em><em>UUID</em><em>, </em><em>Path</em><em>, </em><em>dict</em><em>]</em>) – Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path</p></li>
<li><p><strong>one</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.api.html#one.api.OneAlyx" title="(in ONE)"><em>one.api.OneAlyx</em></a>) – An instance of ONE (shouldn’t be in ‘local’ mode)</p></li>
<li><p><strong>probe</strong> (<em>[</em><em>str</em><em>, </em><em>list</em><em> of </em><em>str</em><em>]</em>) – The probe label(s), e.g. ‘probe01’</p></li>
<li><p><strong>aligned</strong> (<em>bool</em>) – Whether to get the latest user aligned channel when not resolved or use histology track</p></li>
<li><p><strong>dataset_types</strong> (<em>list</em><em> of </em><em>str</em>) – Optional additional spikes/clusters objects to add to the standard default list</p></li>
<li><p><strong>spike_sorter</strong> (<em>str</em>) – Name of the spike sorting you want to load (None for default which is pykilosort if it’s
available otherwise the default MATLAB kilosort)</p></li>
<li><p><strong>brain_atlas</strong> (<a class="reference internal" href="iblatlas.atlas.html#iblatlas.atlas.BrainAtlas" title="iblatlas.atlas.BrainAtlas"><em>iblatlas.atlas.BrainAtlas</em></a>) – Brain atlas object (default: Allen atlas)</p></li>
<li><p><strong>return_collection</strong> (<em>bool</em>) – Returns an extra argument with the collection chosen</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>spikes</strong> (<em>dict of one.alf.io.AlfBunch</em>) – A dict with probe labels as keys, contains bunch(es) of spike data for the provided
session and spike sorter, with keys (‘clusters’, ‘times’)</p></li>
<li><p><strong>clusters</strong> (<em>dict of one.alf.io.AlfBunch</em>) – A dict with probe labels as keys, contains bunch(es) of cluster data, with keys
(‘channels’, ‘depths’, ‘metrics’)</p></li>
<li><p><strong>channels</strong> (<em>dict of one.alf.io.AlfBunch</em>) – A dict with probe labels as keys, contains channel locations with keys (‘acronym’,
‘atlas_id’, ‘x’, ‘y’, ‘z’).  Atlas IDs non-lateralized.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.io.one.load_ephys_session">
<span class="sig-name descname"><span class="pre">load_ephys_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#load_ephys_session"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.load_ephys_session" title="Link to this definition"></a></dt>
<dd><p>From an eid, hits the Alyx database and downloads a standard default set of dataset types
From a local session Path (pathlib.Path), loads a standard default set of dataset types</p>
<blockquote>
<div><dl class="simple">
<dt>to perform analysis:</dt><dd><p>‘clusters.channels’,
‘clusters.depths’,
‘clusters.metrics’,
‘spikes.clusters’,
‘spikes.times’,
‘probes.description’</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>[</em><em>str</em><em>, </em><em>UUID</em><em>, </em><em>Path</em><em>, </em><em>dict</em><em>]</em>) – Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path</p></li>
<li><p><strong>one</strong> (<em>oneibl.one.OneAlyx</em><em>, </em><em>optional</em>) – ONE object to use for loading. Will generate internal one if not used, by default None</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>spikes</strong> (<em>dict of one.alf.io.AlfBunch</em>) – A dict with probe labels as keys, contains bunch(es) of spike data for the provided
session and spike sorter, with keys (‘clusters’, ‘times’)</p></li>
<li><p><strong>clusters</strong> (<em>dict of one.alf.io.AlfBunch</em>) – A dict with probe labels as keys, contains bunch(es) of cluster data, with keys
(‘channels’, ‘depths’, ‘metrics’)</p></li>
<li><p><strong>trials</strong> (<em>one.alf.io.AlfBunch of numpy.ndarray</em>) – The session trials data</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.io.one.merge_clusters_channels">
<span class="sig-name descname"><span class="pre">merge_clusters_channels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dic_clus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_add_extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#merge_clusters_channels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.merge_clusters_channels" title="Link to this definition"></a></dt>
<dd><p>Takes (default and any extra) values in given keys from channels and assign them to clusters.
If channels does not contain any data, the new keys are added to clusters but left empty.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dic_clus</strong> (<em>dict</em><em> of </em><a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.alf.io.html#one.alf.io.AlfBunch" title="(in ONE)"><em>one.alf.io.AlfBunch</em></a>) – 1 bunch per probe, containing cluster information</p></li>
<li><p><strong>channels</strong> (<em>dict</em><em> of </em><a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.alf.io.html#one.alf.io.AlfBunch" title="(in ONE)"><em>one.alf.io.AlfBunch</em></a>) – 1 bunch per probe, containing channels bunch with keys (‘acronym’, ‘atlas_id’, ‘x’, ‘y’, z’, ‘localCoordinates’)</p></li>
<li><p><strong>keys_to_add_extra</strong> (<em>list</em><em> of </em><em>str</em>) – Any extra keys to load into channels bunches</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>clusters (1 bunch per probe) with new keys values.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict of <a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.alf.io.html#one.alf.io.AlfBunch" title="(in ONE)">one.alf.io.AlfBunch</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.io.one.load_passive_rfmap">
<span class="sig-name descname"><span class="pre">load_passive_rfmap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#load_passive_rfmap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.load_passive_rfmap" title="Link to this definition"></a></dt>
<dd><p>For a given eid load in the passive receptive field mapping protocol data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>[</em><em>str</em><em>, </em><em>UUID</em><em>, </em><em>Path</em><em>, </em><em>dict</em><em>]</em>) – Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path</p></li>
<li><p><strong>one</strong> (<em>oneibl.one.OneAlyx</em><em>, </em><em>optional</em>) – An instance of ONE (may be in ‘local’ - offline - mode)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Passive receptive field mapping data</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.alf.io.html#one.alf.io.AlfBunch" title="(in ONE)">one.alf.io.AlfBunch</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.io.one.load_wheel_reaction_times">
<span class="sig-name descname"><span class="pre">load_wheel_reaction_times</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#load_wheel_reaction_times"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.load_wheel_reaction_times" title="Link to this definition"></a></dt>
<dd><p>Return the calculated reaction times for session.  Reaction times are defined as the time
between the go cue (onset tone) and the onset of the first substantial wheel movement.   A
movement is considered sufficiently large if its peak amplitude is at least 1/3rd of the
distance to threshold (~0.1 radians).</p>
<p>Negative times mean the onset of the movement occurred before the go cue.  Nans may occur if
there was no detected movement withing the period, or when the goCue_times or feedback_times
are nan.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>[</em><em>str</em><em>, </em><em>UUID</em><em>, </em><em>Path</em><em>, </em><em>dict</em><em>]</em>) – Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path</p></li>
<li><p><strong>one</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.api.html#one.api.OneAlyx" title="(in ONE)"><em>one.api.OneAlyx</em></a><em>, </em><em>optional</em>) – one object to use for loading. Will generate internal one if not used, by default None</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>reaction times</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.io.one.load_iti">
<span class="sig-name descname"><span class="pre">load_iti</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#load_iti"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.load_iti" title="Link to this definition"></a></dt>
<dd><p>The inter-trial interval (ITI) time for each trial, defined as the period of open-loop grey
screen commencing at stimulus off and lasting until the quiescent period at the start of the
following trial.  Note that the ITI for the first trial is the time between the first trial
and the next, therefore the last value is NaN.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>trials</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.alf.io.html#one.alf.io.AlfBunch" title="(in ONE)"><em>one.alf.io.AlfBunch</em></a>) – An ALF trials object containing the keys {‘intervals’, ‘stimOff_times’}.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An array of inter-trial intervals, the last value being NaN.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.io.one.load_channels_from_insertion">
<span class="sig-name descname"><span class="pre">load_channels_from_insertion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ba</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#load_channels_from_insertion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.load_channels_from_insertion" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SpikeSortingLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">one</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.api.html#one.api.One" title="(in ONE)"><span class="pre">One</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">atlas</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datasets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">files</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">histology</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spike_sorter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'pykilosort'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spike_sorting_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_sync</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SpikeSortingLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Object that will load spike sorting data for a given probe insertion.
This class can be instantiated in several manners
- With Alyx database probe id:</p>
<blockquote>
<div><p>SpikeSortingLoader(pid=pid, one=one)</p>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>With Alyx database eic and probe name:</dt><dd><p>SpikeSortingLoader(eid=eid, pname=’probe00’, one=one)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>From a local session and probe name:</dt><dd><p>SpikeSortingLoader(session_path=session_path, pname=’probe00’)</p>
</dd>
</dl>
</li>
</ul>
<p>NB: When no ONE instance is passed, any datasets that are loaded will not be recorded.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.one">
<span class="sig-name descname"><span class="pre">one</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.api.html#one.api.One" title="(in ONE)"><span class="pre">One</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.one" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.atlas">
<span class="sig-name descname"><span class="pre">atlas</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.atlas" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.pid">
<span class="sig-name descname"><span class="pre">pid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.pid" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.eid">
<span class="sig-name descname"><span class="pre">eid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.eid" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.pname">
<span class="sig-name descname"><span class="pre">pname</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.pname" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.session_path">
<span class="sig-name descname"><span class="pre">session_path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Path</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.session_path" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.collections">
<span class="sig-name descname"><span class="pre">collections</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.collections" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.datasets">
<span class="sig-name descname"><span class="pre">datasets</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.datasets" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.files">
<span class="sig-name descname"><span class="pre">files</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.files" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.collection">
<span class="sig-name descname"><span class="pre">collection</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.collection" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.histology">
<span class="sig-name descname"><span class="pre">histology</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.histology" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.spike_sorter">
<span class="sig-name descname"><span class="pre">spike_sorter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'pykilosort'</span></em><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.spike_sorter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.spike_sorting_path">
<span class="sig-name descname"><span class="pre">spike_sorting_path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Path</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.spike_sorting_path" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.load_spike_sorting_object">
<span class="sig-name descname"><span class="pre">load_spike_sorting_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SpikeSortingLoader.load_spike_sorting_object"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.load_spike_sorting_object" title="Link to this definition"></a></dt>
<dd><p>Loads an ALF object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – object name, str between ‘spikes’, ‘clusters’ or ‘channels’</p></li>
<li><p><strong>spike_sorter</strong> – (defaults to ‘pykilosort’)</p></li>
<li><p><strong>dataset_types</strong> – list of extra dataset types, for example [‘spikes.samples’]</p></li>
<li><p><strong>collection</strong> – string specifiying the collection, for example ‘alf/probe01/pykilosort’</p></li>
<li><p><strong>kwargs</strong> – additional arguments to be passed to one.api.One.load_object</p></li>
<li><p><strong>missing</strong> – ‘raise’ (default) or ‘ignore’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.download_spike_sorting_object">
<span class="sig-name descname"><span class="pre">download_spike_sorting_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spike_sorter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pykilosort'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'raise'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SpikeSortingLoader.download_spike_sorting_object"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.download_spike_sorting_object" title="Link to this definition"></a></dt>
<dd><p>Downloads an ALF object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – object name, str between ‘spikes’, ‘clusters’ or ‘channels’</p></li>
<li><p><strong>spike_sorter</strong> – (defaults to ‘pykilosort’)</p></li>
<li><p><strong>dataset_types</strong> – list of extra dataset types, for example [‘spikes.samples’]</p></li>
<li><p><strong>collection</strong> – string specifiying the collection, for example ‘alf/probe01/pykilosort’</p></li>
<li><p><strong>kwargs</strong> – additional arguments to be passed to one.api.One.load_object</p></li>
<li><p><strong>missing</strong> – ‘raise’ (default) or ‘ignore’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.download_spike_sorting">
<span class="sig-name descname"><span class="pre">download_spike_sorting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SpikeSortingLoader.download_spike_sorting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.download_spike_sorting" title="Link to this definition"></a></dt>
<dd><p>Downloads spikes, clusters and channels</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spike_sorter</strong> – (defaults to ‘pykilosort’)</p></li>
<li><p><strong>dataset_types</strong> – list of extra dataset types</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.load_channels">
<span class="sig-name descname"><span class="pre">load_channels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SpikeSortingLoader.load_channels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.load_channels" title="Link to this definition"></a></dt>
<dd><p>Loads channels
The channel locations can come from several sources, it will load the most advanced version of the histology available,
regardless of the spike sorting version loaded. The steps are (from most advanced to fresh out of the imaging):
-   alf: the final version of channel locations, same as resolved with the difference that data is on file
-   resolved: channel locations alignments have been agreed upon
-   aligned: channel locations have been aligned, but review or other alignments are pending, potentially not accurate
-   traced: the histology track has been recovered from microscopy, however the depths may not match, inaccurate data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spike_sorter</strong> – (defaults to ‘pykilosort’)</p></li>
<li><p><strong>dataset_types</strong> – list of extra dataset types</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.load_spike_sorting">
<span class="sig-name descname"><span class="pre">load_spike_sorting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spike_sorter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pykilosort'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SpikeSortingLoader.load_spike_sorting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.load_spike_sorting" title="Link to this definition"></a></dt>
<dd><p>Loads spikes, clusters and channels</p>
<p>There could be several spike sorting collections, by default the loader will get the pykilosort collection</p>
<p>The channel locations can come from several sources, it will load the most advanced version of the histology available,
regardless of the spike sorting version loaded. The steps are (from most advanced to fresh out of the imaging):
-   alf: the final version of channel locations, same as resolved with the difference that data is on file
-   resolved: channel locations alignments have been agreed upon
-   aligned: channel locations have been aligned, but review or other alignments are pending, potentially not accurate
-   traced: the histology track has been recovered from microscopy, however the depths may not match, inaccurate data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spike_sorter</strong> – (defaults to ‘pykilosort’)</p></li>
<li><p><strong>dataset_types</strong> – list of extra dataset types</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.compute_metrics">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">compute_metrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spikes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clusters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SpikeSortingLoader.compute_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.compute_metrics" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.merge_clusters">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">merge_clusters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spikes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clusters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compute_metrics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SpikeSortingLoader.merge_clusters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.merge_clusters" title="Link to this definition"></a></dt>
<dd><p>Merge the metrics and the channel information into the clusters dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spikes</strong> – </p></li>
<li><p><strong>clusters</strong> – </p></li>
<li><p><strong>channels</strong> – </p></li>
<li><p><strong>cache_dir</strong> – if specified, will look for a cached parquet file to speed up. This is to be used
for clusters or analysis applications (defaults to None).</p></li>
<li><p><strong>compute_metrics</strong> – if True, will explicitly recompute metrics (defaults to false)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>cluster dictionary containing metrics and histology</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.url">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">url</span></span><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.url" title="Link to this definition"></a></dt>
<dd><p>Gets flatiron URL for the session</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.timesprobe2times">
<span class="sig-name descname"><span class="pre">timesprobe2times</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'forward'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SpikeSortingLoader.timesprobe2times"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.timesprobe2times" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.samples2times">
<span class="sig-name descname"><span class="pre">samples2times</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'forward'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SpikeSortingLoader.samples2times"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.samples2times" title="Link to this definition"></a></dt>
<dd><p>Converts ephys sample values to session main clock seconds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> – numpy array of times in seconds or samples to resync</p></li>
<li><p><strong>direction</strong> – ‘forward’ (samples probe time to seconds main time) or ‘reverse’
(seconds main time to samples probe time)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.pid2ref">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pid2ref</span></span><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.pid2ref" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SpikeSortingLoader.raster">
<span class="sig-name descname"><span class="pre">raster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spikes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">br</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'raster'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_series</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SpikeSortingLoader.raster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SpikeSortingLoader.raster" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spikes</strong> – spikes dictionary or Bunch</p></li>
<li><p><strong>channels</strong> – channels dictionary or Bunch.</p></li>
<li><p><strong>save_dir</strong> – if specified save to this directory as “{pid}_{probe}_{label}.png”.
Otherwise, plot.</p></li>
<li><p><strong>br</strong> – brain regions object (optional)</p></li>
<li><p><strong>label</strong> – label for saved image (optional, default=”raster”)</p></li>
<li><p><strong>time_series</strong> – timeseries dictionary for behavioral event times (optional)</p></li>
<li><p><strong>**kwargs</strong> – <p>kwargs passed to <cite>driftmap()</cite> (optional)</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SessionLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">one:</span> <span class="pre">~one.api.One</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_path:</span> <span class="pre">~pathlib.Path</span> <span class="pre">=</span> <span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eid:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_info:</span> <span class="pre">~pandas.core.frame.DataFrame</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trials:</span> <span class="pre">~pandas.core.frame.DataFrame</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wheel:</span> <span class="pre">~pandas.core.frame.DataFrame</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pose:</span> <span class="pre">dict</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motion_energy:</span> <span class="pre">dict</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pupil:</span> <span class="pre">~pandas.core.frame.DataFrame</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SessionLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SessionLoader" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Object to load session data for a give session in the recommended way.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>one</strong> (<em>one.api.ONE instance</em>) – Can be in remote or local mode (required)</p></li>
<li><p><strong>session_path</strong> (<em>string</em><em> or </em><em>pathlib.Path</em>) – The absolute path to the session (one of session_path or eid is required)</p></li>
<li><p><strong>eid</strong> (<em>string</em>) – database UUID of the session (one of session_path or eid is required)</p></li>
<li><p><strong>provided</strong> (<em>If both are</em>) – </p></li>
<li><p><strong>eid.</strong> (<em>session_path takes precedence over</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<ol class="arabic">
<li><dl>
<dt>Load all available session data for one session:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">one.api</span> <span class="kn">import</span> <span class="n">ONE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">brainbox.io.one</span> <span class="kn">import</span> <span class="n">SessionLoader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sess_loader</span> <span class="o">=</span> <span class="n">SessionLoader</span><span class="p">(</span><span class="n">one</span><span class="o">=</span><span class="n">one</span><span class="p">,</span> <span class="n">session_path</span><span class="o">=</span><span class="s1">&#39;/mnt/s0/Data/Subjects/cortexlab/KS022/2019-12-10/001/&#39;</span><span class="p">)</span>
<span class="go"># Object is initiated, but no data is loaded as you can see in the data_info attribute</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sess_loader</span><span class="o">.</span><span class="n">data_info</span>
<span class="go">            name  is_loaded</span>
<span class="go">0         trials      False</span>
<span class="go">1          wheel      False</span>
<span class="go">2           pose      False</span>
<span class="go">3  motion_energy      False</span>
<span class="go">4          pupil      False</span>
</pre></div>
</div>
<p># Loading all available session data, the data_info attribute now shows which data has been loaded
&gt;&gt;&gt; sess_loader.load_session_data()
&gt;&gt;&gt; sess_loader.data_info</p>
<blockquote>
<div><p>name  is_loaded</p>
</div></blockquote>
<p>0         trials       True
1          wheel       True
2           pose       True
3  motion_energy       True
4          pupil      False</p>
<p># The data is loaded in pandas dataframes that you can access via the respective attributes, e.g.
&gt;&gt;&gt; type(sess_loader.trials)
pandas.core.frame.DataFrame
&gt;&gt;&gt; sess_loader.trials.shape
(626, 18)
# Each data comes with its own timestamps in a column called ‘times’
&gt;&gt;&gt; sess_loader.wheel[‘times’]
0             0.134286
1             0.135286
2             0.136286
3             0.137286
4             0.138286</p>
<blockquote>
<div><p>…</p>
</div></blockquote>
<p># For camera data (pose, motionEnergy) the respective functions load the data into one dataframe per camera.
# The dataframes of all cameras are collected in a dictionary
&gt;&gt;&gt; type(sess_loader.pose)
dict
&gt;&gt;&gt; sess_loader.pose.keys()
dict_keys([‘leftCamera’, ‘rightCamera’, ‘bodyCamera’])
&gt;&gt;&gt; sess_loader.pose[‘bodyCamera’].columns
Index([‘times’, ‘tail_start_x’, ‘tail_start_y’, ‘tail_start_likelihood’], dtype=’object’)
# In order to control the loading of specific data by e.g. specifying parameters, use the individual loading
functions:
&gt;&gt;&gt; sess_loader.load_wheel(sampling_rate=100)</p>
</dd>
</dl>
</li>
</ol>
<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.one">
<span class="sig-name descname"><span class="pre">one</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.api.html#one.api.One" title="(in ONE)"><span class="pre">One</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#brainbox.io.one.SessionLoader.one" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.session_path">
<span class="sig-name descname"><span class="pre">session_path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Path</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#brainbox.io.one.SessionLoader.session_path" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.eid">
<span class="sig-name descname"><span class="pre">eid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#brainbox.io.one.SessionLoader.eid" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.data_info">
<span class="sig-name descname"><span class="pre">data_info</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">DataFrame</span></em><a class="headerlink" href="#brainbox.io.one.SessionLoader.data_info" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.trials">
<span class="sig-name descname"><span class="pre">trials</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">DataFrame</span></em><a class="headerlink" href="#brainbox.io.one.SessionLoader.trials" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.wheel">
<span class="sig-name descname"><span class="pre">wheel</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">DataFrame</span></em><a class="headerlink" href="#brainbox.io.one.SessionLoader.wheel" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.pose">
<span class="sig-name descname"><span class="pre">pose</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span></em><a class="headerlink" href="#brainbox.io.one.SessionLoader.pose" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.motion_energy">
<span class="sig-name descname"><span class="pre">motion_energy</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span></em><a class="headerlink" href="#brainbox.io.one.SessionLoader.motion_energy" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.pupil">
<span class="sig-name descname"><span class="pre">pupil</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">DataFrame</span></em><a class="headerlink" href="#brainbox.io.one.SessionLoader.pupil" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.load_session_data">
<span class="sig-name descname"><span class="pre">load_session_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wheel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motion_energy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pupil</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reload</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SessionLoader.load_session_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SessionLoader.load_session_data" title="Link to this definition"></a></dt>
<dd><p>Function to load available session data into the SessionLoader object. Input parameters allow to control which
data is loaded. Data is loaded into an attribute of the SessionLoader object with the same name as the input
parameter (e.g. SessionLoader.trials, SessionLoader.pose). Information about which data is loaded is stored
in SessionLoader.data_info</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trials</strong> (<em>boolean</em>) – Whether to load all trials data into SessionLoader.trials, default is True</p></li>
<li><p><strong>wheel</strong> (<em>boolean</em>) – Whether to load wheel data (position, velocity, acceleration) into SessionLoader.wheel, default is True</p></li>
<li><p><strong>pose</strong> (<em>boolean</em>) – Whether to load pose tracking results (DLC) for each available camera into SessionLoader.pose,
default is True</p></li>
<li><p><strong>motion_energy</strong> (<em>boolean</em>) – Whether to load motion energy data (whisker pad for left/right camera, body for body camera)
into SessionLoader.motion_energy, default is True</p></li>
<li><p><strong>pupil</strong> (<em>boolean</em>) – Whether to load pupil diameter (raw and smooth) for the left/right camera into SessionLoader.pupil,
default is True</p></li>
<li><p><strong>reload</strong> (<em>boolean</em>) – Whether to reload data that has already been loaded into this SessionLoader object, default is False</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.load_trials">
<span class="sig-name descname"><span class="pre">load_trials</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SessionLoader.load_trials"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SessionLoader.load_trials" title="Link to this definition"></a></dt>
<dd><p>Function to load trials data into SessionLoader.trials</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.load_wheel">
<span class="sig-name descname"><span class="pre">load_wheel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corner_frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SessionLoader.load_wheel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SessionLoader.load_wheel" title="Link to this definition"></a></dt>
<dd><p>Function to load wheel data (position, velocity, acceleration) into SessionLoader.wheel. The wheel position
is first interpolated to a uniform sampling rate. Then velocity and acceleration are computed, during which
a Butterworth low-pass filter is applied.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fs</strong> (<em>int</em><em>, </em><em>float</em>) – Sampling frequency for the wheel position, default is 1000 Hz</p></li>
<li><p><strong>corner_frequency</strong> (<em>int</em><em>, </em><em>float</em>) – Corner frequency of Butterworth low-pass filter, default is 20</p></li>
<li><p><strong>order</strong> (<em>int</em><em>, </em><em>float</em>) – Order of Butterworth low_pass filter, default is 8</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.load_pose">
<span class="sig-name descname"><span class="pre">load_pose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">likelihood_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">views</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['left',</span> <span class="pre">'right',</span> <span class="pre">'body']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SessionLoader.load_pose"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SessionLoader.load_pose" title="Link to this definition"></a></dt>
<dd><p>Function to load the pose estimation results (DLC) into SessionLoader.pose. SessionLoader.pose is a
dictionary where keys are the names of the cameras for which pose data is loaded, and values are pandas
Dataframes with the timestamps and pose data, one row for each body part tracked for that camera.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>likelihood_thr</strong> (<em>float</em>) – The position of each tracked body part come with a likelihood of that estimate for each time point.
Estimates for time points with likelihood &lt; likelihood_thr are set to NaN. To skip thresholding set
likelihood_thr=1. Default is 0.9</p></li>
<li><p><strong>views</strong> (<em>list</em>) – List of camera views for which to try and load data. Possible options are {‘left’, ‘right’, ‘body’}</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.load_motion_energy">
<span class="sig-name descname"><span class="pre">load_motion_energy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">views</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['left',</span> <span class="pre">'right',</span> <span class="pre">'body']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SessionLoader.load_motion_energy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SessionLoader.load_motion_energy" title="Link to this definition"></a></dt>
<dd><p>Function to load the motion energy data into SessionLoader.motion_energy. SessionLoader.motion_energy is a
dictionary where keys are the names of the cameras for which motion energy data is loaded, and values are
pandas Dataframes with the timestamps and motion energy data.
The motion energy for the left and right camera is calculated for a square roughly covering the whisker pad
(whiskerMotionEnergy). The motion energy for the body camera is calculated for a square covering much of the
body (bodyMotionEnergy).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>views</strong> (<em>list</em>) – List of camera views for which to try and load data. Possible options are {‘left’, ‘right’, ‘body’}</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.load_licks">
<span class="sig-name descname"><span class="pre">load_licks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SessionLoader.load_licks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SessionLoader.load_licks" title="Link to this definition"></a></dt>
<dd><p>Not yet implemented</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.SessionLoader.load_pupil">
<span class="sig-name descname"><span class="pre">load_pupil</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">snr_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#SessionLoader.load_pupil"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.SessionLoader.load_pupil" title="Link to this definition"></a></dt>
<dd><p>Function to load raw and smoothed pupil diameter data from the left camera into SessionLoader.pupil.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>snr_thresh</strong> (<em>float</em>) – An SNR is calculated from the raw and smoothed pupil diameter. If this snr &lt; snr_thresh the data
will be considered unusable and will be discarded.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="brainbox.io.one.EphysSessionLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">EphysSessionLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#EphysSessionLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.EphysSessionLoader" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#brainbox.io.one.SessionLoader" title="brainbox.io.one.SessionLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionLoader</span></code></a></p>
<p>Spike sorting enhanced version of SessionLoader
Loads spike sorting data for all probes in the session, in the self.ephys dict
&gt;&gt;&gt; EphysSessionLoader(eid=eid, one=one)
To select for a specific probe
&gt;&gt;&gt; EphysSessionLoader(eid=eid, one=one, pid=pid)</p>
<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.EphysSessionLoader.load_session_data">
<span class="sig-name descname"><span class="pre">load_session_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#EphysSessionLoader.load_session_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.EphysSessionLoader.load_session_data" title="Link to this definition"></a></dt>
<dd><p>Function to load available session data into the SessionLoader object. Input parameters allow to control which
data is loaded. Data is loaded into an attribute of the SessionLoader object with the same name as the input
parameter (e.g. SessionLoader.trials, SessionLoader.pose). Information about which data is loaded is stored
in SessionLoader.data_info</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trials</strong> (<em>boolean</em>) – Whether to load all trials data into SessionLoader.trials, default is True</p></li>
<li><p><strong>wheel</strong> (<em>boolean</em>) – Whether to load wheel data (position, velocity, acceleration) into SessionLoader.wheel, default is True</p></li>
<li><p><strong>pose</strong> (<em>boolean</em>) – Whether to load pose tracking results (DLC) for each available camera into SessionLoader.pose,
default is True</p></li>
<li><p><strong>motion_energy</strong> (<em>boolean</em>) – Whether to load motion energy data (whisker pad for left/right camera, body for body camera)
into SessionLoader.motion_energy, default is True</p></li>
<li><p><strong>pupil</strong> (<em>boolean</em>) – Whether to load pupil diameter (raw and smooth) for the left/right camera into SessionLoader.pupil,
default is True</p></li>
<li><p><strong>reload</strong> (<em>boolean</em>) – Whether to reload data that has already been loaded into this SessionLoader object, default is False</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brainbox.io.one.EphysSessionLoader.load_spike_sorting">
<span class="sig-name descname"><span class="pre">load_spike_sorting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pnames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/io/one.html#EphysSessionLoader.load_spike_sorting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.io.one.EphysSessionLoader.load_spike_sorting" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="brainbox.io.one.EphysSessionLoader.probes">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">probes</span></span><a class="headerlink" href="#brainbox.io.one.EphysSessionLoader.probes" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.EphysSessionLoader.data_info">
<span class="sig-name descname"><span class="pre">data_info</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">DataFrame</span></em><a class="headerlink" href="#brainbox.io.one.EphysSessionLoader.data_info" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.EphysSessionLoader.trials">
<span class="sig-name descname"><span class="pre">trials</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">DataFrame</span></em><a class="headerlink" href="#brainbox.io.one.EphysSessionLoader.trials" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.EphysSessionLoader.wheel">
<span class="sig-name descname"><span class="pre">wheel</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">DataFrame</span></em><a class="headerlink" href="#brainbox.io.one.EphysSessionLoader.wheel" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.EphysSessionLoader.pose">
<span class="sig-name descname"><span class="pre">pose</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span></em><a class="headerlink" href="#brainbox.io.one.EphysSessionLoader.pose" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.EphysSessionLoader.motion_energy">
<span class="sig-name descname"><span class="pre">motion_energy</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span></em><a class="headerlink" href="#brainbox.io.one.EphysSessionLoader.motion_energy" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.io.one.EphysSessionLoader.pupil">
<span class="sig-name descname"><span class="pre">pupil</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">DataFrame</span></em><a class="headerlink" href="#brainbox.io.one.EphysSessionLoader.pupil" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="brainbox.io.html" class="btn btn-neutral float-left" title="brainbox.io" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="brainbox.io.spikeglx.html" class="btn btn-neutral float-right" title="brainbox.io.spikeglx" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, International Brain Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>