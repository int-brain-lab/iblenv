<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>brainbox.behavior.wheel &mdash; IBL Library  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="brainbox.core" href="brainbox.core.html" />
    <link rel="prev" title="brainbox.behavior.training" href="brainbox.behavior.training.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> IBL Library
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The Open Neurophysiology Environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/one_quickstart.html">ONE Quick Start</a></li>
<li class="toctree-l1"><a class="reference external" href="https://int-brain-lab.github.io/ONE/">Full documentation Website for ONE</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DataJoint</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dj_docs/dj_introduction.html">Introduction to DataJoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dj_docs/dj_public.html">Publicly available IBL data via Datajoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dj_docs/dj_credentials.html">DataJoint credentials for internal IBL users</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Public</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/public_introduction.html">Publicly available IBL data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/data_release_pilot.html">Data Release - Pilot Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_repro_ephys.html">Data Release - Reproducible Ephys Paper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_brainwidemap.html">Data Release - Brain Wide Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/information_contact.html">Information and troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Exploring IBL Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_structure.html">Get to know the datasets and folder structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_download.html">Download the public datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../loading_examples.html">Loading Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../02_installation.html">Unified Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_contribution.html">How to contribute</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples &amp; Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../atlas_examples.html">Atlas Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/docs_wheel_moves.html">Working with wheel data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/dj_intro/dj_intro.html">Datajoint Introductory Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/dj_basics/dj_basics.html">Exploring the IBL Data Pipeline</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../010_api_reference.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ibllib.html">ibllib</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="brainbox.html">brainbox</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="brainbox.atlas.html">brainbox.atlas</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="brainbox.behavior.html">brainbox.behavior</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="brainbox.behavior.dlc.html">brainbox.behavior.dlc</a></li>
<li class="toctree-l4"><a class="reference internal" href="brainbox.behavior.pyschofit.html">brainbox.behavior.pyschofit</a></li>
<li class="toctree-l4"><a class="reference internal" href="brainbox.behavior.training.html">brainbox.behavior.training</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">brainbox.behavior.wheel</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.core.html">brainbox.core</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.ephys_plots.html">brainbox.ephys_plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.io.html">brainbox.io</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.lfp.html">brainbox.lfp</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.metrics.html">brainbox.metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.modeling.html">brainbox.modeling</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.plot.html">brainbox.plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.plot_base.html">brainbox.plot_base</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.population.html">brainbox.population</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.processing.html">brainbox.processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.quality.html">brainbox.quality</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.singlecell.html">brainbox.singlecell</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.spike_features.html">brainbox.spike_features</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.task.html">brainbox.task</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.tests.html">brainbox.tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.video.html">brainbox.video</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="iblviewer.html">iblviewer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Detailed Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBL Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../010_api_reference.html">API Reference</a> &raquo;</li>
          <li><a href="brainbox.html">brainbox</a> &raquo;</li>
          <li><a href="brainbox.behavior.html">brainbox.behavior</a> &raquo;</li>
      <li>brainbox.behavior.wheel</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/brainbox.behavior.wheel.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="module-brainbox.behavior.wheel">
<span id="brainbox-behavior-wheel"></span><h1>brainbox.behavior.wheel<a class="headerlink" href="#module-brainbox.behavior.wheel" title="Permalink to this headline"></a></h1>
<p>Set of functions to handle wheel data</p>
<p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.wheel.cm_to_deg" title="brainbox.behavior.wheel.cm_to_deg"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cm_to_deg</span></code></a></p></td>
<td><p>Convert wheel position to degrees turned.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.wheel.cm_to_rad" title="brainbox.behavior.wheel.cm_to_rad"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cm_to_rad</span></code></a></p></td>
<td><p>Convert wheel position to radians.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">direction_changes</span></code></p></td>
<td><p>Find the direction changes for the given movement intervals.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.wheel.interpolate_position" title="brainbox.behavior.wheel.interpolate_position"><code class="xref py py-obj docutils literal notranslate"><span class="pre">interpolate_position</span></code></a></p></td>
<td><p>Return linearly interpolated wheel position.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.wheel.last_movement_onset" title="brainbox.behavior.wheel.last_movement_onset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">last_movement_onset</span></code></a></p></td>
<td><p>Find the time at which movement started, given an event timestamp that occurred during the movement.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.wheel.movements" title="brainbox.behavior.wheel.movements"><code class="xref py py-obj docutils literal notranslate"><span class="pre">movements</span></code></a></p></td>
<td><p>Detect wheel movements.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.wheel.samples_to_cm" title="brainbox.behavior.wheel.samples_to_cm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">samples_to_cm</span></code></a></p></td>
<td><p>Convert wheel position samples to cm linear displacement.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.wheel.traces_by_trial" title="brainbox.behavior.wheel.traces_by_trial"><code class="xref py py-obj docutils literal notranslate"><span class="pre">traces_by_trial</span></code></a></p></td>
<td><p>Returns list of tuples of positions and velocity for samples between stimulus onset and feedback.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">velocity</span></code></p></td>
<td><p>Compute wheel velocity from non-uniformly sampled wheel data.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">velocity_filtered</span></code></p></td>
<td><p>Compute wheel velocity from uniformly sampled wheel data</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.wheel.velocity_smoothed" title="brainbox.behavior.wheel.velocity_smoothed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">velocity_smoothed</span></code></a></p></td>
<td><p>Compute wheel velocity from uniformly sampled wheel data</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.wheel.cm_to_deg">
<span class="sig-name descname"><span class="pre">cm_to_deg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">positions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wheel_diameter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6.2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/wheel.html#cm_to_deg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.wheel.cm_to_deg" title="Permalink to this definition"></a></dt>
<dd><p>Convert wheel position to degrees turned.  This may be useful for e.g. calculating velocity
in revolutions per second</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>positions</strong> – array of wheel positions in cm</p></li>
<li><p><strong>wheel_diameter</strong> – the diameter of the wheel in cm</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>array of wheel positions in degrees turned</p>
</dd>
</dl>
<p># Example: Convert linear cm to degrees
&gt;&gt;&gt; cm_to_deg(3.142 * WHEEL_DIAMETER)
360.04667846020925</p>
<p># Example: Get positions in deg from cm for 5cm diameter wheel
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; cm_to_deg(np.array([0.0270526 , 0.04057891, 0.05410521, 0.06763151]), wheel_diameter=5)
array([0.61999992, 0.93000011, 1.24000007, 1.55000003])</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.wheel.cm_to_rad">
<span class="sig-name descname"><span class="pre">cm_to_rad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">positions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wheel_diameter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6.2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/wheel.html#cm_to_rad"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.wheel.cm_to_rad" title="Permalink to this definition"></a></dt>
<dd><p>Convert wheel position to radians.  This may be useful for e.g. calculating angular velocity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>positions</strong> – array of wheel positions in cm</p></li>
<li><p><strong>wheel_diameter</strong> – the diameter of the wheel in cm</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>array of wheel angle in radians</p>
</dd>
</dl>
<p># Example: Convert linear cm to radians
&gt;&gt;&gt; cm_to_rad(1)
0.3225806451612903</p>
<p># Example: Get positions in rad from cm for 5cm diameter wheel
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; cm_to_rad(np.array([0.0270526 , 0.04057891, 0.05410521, 0.06763151]), wheel_diameter=5)
array([0.01082104, 0.01623156, 0.02164208, 0.0270526 ])</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.wheel.interpolate_position">
<span class="sig-name descname"><span class="pre">interpolate_position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">re_ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">re_pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_gaps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/wheel.html#interpolate_position"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.wheel.interpolate_position" title="Permalink to this definition"></a></dt>
<dd><p>Return linearly interpolated wheel position.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>re_ts</strong> (<em>array_like</em>) – Array of timestamps</p></li>
<li><p><strong>re_pos</strong> (<em>array_like</em>) – Array of unwrapped wheel positions</p></li>
<li><p><strong>freq</strong> (<em>float</em>) – frequency in Hz of the interpolation</p></li>
<li><p><strong>kind</strong> (<em>{'linear'</em><em>, </em><em>'cubic'}</em>) – Type of interpolation. Defaults to linear interpolation.</p></li>
<li><p><strong>fill_gaps</strong> (<em>float</em>) – Minimum gap length to fill. For gaps over this time (seconds),
forward fill values before interpolation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>yinterp</strong> (<em>array</em>) – Interpolated position</p></li>
<li><p><strong>t</strong> (<em>array</em>) – Timestamps of interpolated positions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.wheel.last_movement_onset">
<span class="sig-name descname"><span class="pre">last_movement_onset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_time</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/wheel.html#last_movement_onset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.wheel.last_movement_onset" title="Permalink to this definition"></a></dt>
<dd><p>Find the time at which movement started, given an event timestamp that occurred during the
movement.  Movement start is defined as the first sample after the velocity has been zero
for at least 50ms.  Wheel inputs should be evenly sampled.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> – numpy array of wheel timestamps in seconds</p></li>
<li><p><strong>vel</strong> – numpy array of wheel velocities</p></li>
<li><p><strong>event_time</strong> – timestamp anywhere during movement of interest, e.g. peak velocity</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>timestamp of movement onset</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.wheel.movements">
<span class="sig-name descname"><span class="pre">movements</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_gap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos_thresh_onset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_dur</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">make_plots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/wheel.html#movements"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.wheel.movements" title="Permalink to this definition"></a></dt>
<dd><p>Detect wheel movements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<em>array_like</em>) – An array of evenly sampled wheel timestamps in absolute seconds</p></li>
<li><p><strong>pos</strong> (<em>array_like</em>) – An array of evenly sampled wheel positions</p></li>
<li><p><strong>freq</strong> (<em>int</em>) – The sampling rate of the wheel data</p></li>
<li><p><strong>pos_thresh</strong> (<em>float</em>) – The minimum required movement during the t_thresh window to be considered part of a
movement</p></li>
<li><p><strong>t_thresh</strong> (<em>float</em>) – The time window over which to check whether the pos_thresh has been crossed</p></li>
<li><p><strong>min_gap</strong> (<em>float</em>) – The minimum time between one movement’s offset and another movement’s onset in order to be
considered separate.  Movements with a gap smaller than this are ‘stictched together’</p></li>
<li><p><strong>pos_thresh_onset</strong> (<em>float</em>) – A lower threshold for finding precise onset times.  The first position of each movement
transition that is this much bigger than the starting position is considered the onset</p></li>
<li><p><strong>min_dur</strong> (<em>float</em>) – The minimum duration of a valid movement.  Detected movements shorter than this are ignored</p></li>
<li><p><strong>make_plots</strong> (<em>boolean</em>) – Plot trace of position and velocity, showing detected onsets and offsets</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>onsets</strong> (<em>np.ndarray</em>) – Timestamps of detected movement onsets</p></li>
<li><p><strong>offsets</strong> (<em>np.ndarray</em>) – Timestamps of detected movement offsets</p></li>
<li><p><strong>peak_amps</strong> (<em>np.ndarray</em>) – The absolute maximum amplitude of each detected movement, relative to onset position</p></li>
<li><p><strong>peak_vel_times</strong> (<em>np.ndarray</em>) – Timestamps of peak velocity for each detected movement</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.wheel.samples_to_cm">
<span class="sig-name descname"><span class="pre">samples_to_cm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">positions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wheel_diameter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4096</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/wheel.html#samples_to_cm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.wheel.samples_to_cm" title="Permalink to this definition"></a></dt>
<dd><p>Convert wheel position samples to cm linear displacement.  This may be useful for
inter-converting threshold units</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>positions</strong> – array of wheel positions in sample counts</p></li>
<li><p><strong>wheel_diameter</strong> – the diameter of the wheel in cm</p></li>
<li><p><strong>resolution</strong> – resolution of the rotary encoder</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>array of wheel angle in radians</p>
</dd>
</dl>
<p># Example: Get resolution in linear cm
&gt;&gt;&gt; samples_to_cm(1)
0.004755340442445488</p>
<p># Example: Get positions in linear cm for 4X, 360 ppr encoder
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; samples_to_cm(np.array([2, 3, 4, 5, 6, 7, 6, 5, 4]), resolution=360*4)
array([0.0270526 , 0.04057891, 0.05410521, 0.06763151, 0.08115781,</p>
<blockquote>
<div><p>0.09468411, 0.08115781, 0.06763151, 0.05410521])</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.wheel.traces_by_trial">
<span class="sig-name descname"><span class="pre">traces_by_trial</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">separate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/wheel.html#traces_by_trial"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.wheel.traces_by_trial" title="Permalink to this definition"></a></dt>
<dd><p>Returns list of tuples of positions and velocity for samples between stimulus onset and
feedback.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> – numpy array of timestamps</p></li>
<li><p><strong>args</strong> – optional numpy arrays of the same length as timestamps, such as positions,</p></li>
</ul>
</dd>
</dl>
<p>velocities or accelerations
:param start: start timestamp or array thereof
:param end: end timestamp or array thereof
:param separate: when True, the output is returned as tuples list of the form [(t, args[0],
args[1]), …], when False, the output is a list of n-by-m ndarrays where n = number of
positional args and m = len(t)
:return: list of sliced arrays where length == len(start)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.wheel.velocity_smoothed">
<span class="sig-name descname"><span class="pre">velocity_smoothed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smooth_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.03</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/wheel.html#velocity_smoothed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.wheel.velocity_smoothed" title="Permalink to this definition"></a></dt>
<dd><p>Compute wheel velocity from uniformly sampled wheel data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pos</strong> (<em>array_like</em>) – Array of wheel positions</p></li>
<li><p><strong>smooth_size</strong> (<em>float</em>) – Size of Gaussian smoothing window in seconds</p></li>
<li><p><strong>freq</strong> (<em>float</em>) – Sampling frequency of the data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>vel</strong> (<em>np.ndarray</em>) – Array of velocity values</p></li>
<li><p><strong>acc</strong> (<em>np.ndarray</em>) – Array of acceleration values</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="brainbox.behavior.training.html" class="btn btn-neutral float-left" title="brainbox.behavior.training" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="brainbox.core.html" class="btn btn-neutral float-right" title="brainbox.core" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, International Brain Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>