

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>iblatlas.regions &mdash; IBL Library  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/css/style.css?v=17142d56" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="iblutil" href="iblutil.html" />
    <link rel="prev" title="iblatlas.plots" href="iblatlas.plots.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            IBL Library
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The Open Neurophysiology Environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/one_quickstart.html">ONE Quick Start</a></li>
<li class="toctree-l1"><a class="reference external" href="https://int-brain-lab.github.io/ONE/">Full documentation Website for ONE</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Public</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/public_introduction.html">Publicly available IBL data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_behavior.html">Data Release - Behavior</a></li>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/data_release_pilot.html">Data Release - Pilot Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_repro_ephys.html">Data Release - Reproducible Ephys</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_brainwidemap.html">Data Release - Brain Wide Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_spikesorting_benchmarks.html">Data Release - Spike sorting benchmark datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/information_contact.html">Information and troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Exploring IBL Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_structure.html">Get to know the datasets and folder structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_download.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_download.html#Explore-and-download-data-using-the-ONE-api">Explore and download data using the ONE-api</a></li>
<li class="toctree-l1"><a class="reference internal" href="../loading_examples.html">Loading Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../02_installation.html">Unified Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_contribution.html">How to contribute</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples &amp; Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../atlas_examples.html">Atlas Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/docs_wheel_moves.html">Working with wheel data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/docs_wheel_screen_stimulus.html">Computing the stimulus position using the wheel</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../010_api_reference.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ibllib.html">ibllib</a></li>
<li class="toctree-l2"><a class="reference internal" href="brainbox.html">brainbox</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="iblatlas.html">iblatlas</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="iblatlas.html#terminology">Terminology</a></li>
<li class="toctree-l3"><a class="reference internal" href="iblatlas.html#atlases">Atlases</a></li>
<li class="toctree-l3"><a class="reference internal" href="iblatlas.html#scalings">Scalings</a></li>
<li class="toctree-l3"><a class="reference internal" href="iblatlas.html#brain-regions-mappings">Brain Regions Mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="iblatlas.html#fixtures">Fixtures</a></li>
<li class="toctree-l3"><a class="reference internal" href="iblatlas.atlas.html">iblatlas.atlas</a></li>
<li class="toctree-l3"><a class="reference internal" href="iblatlas.flatmaps.html">iblatlas.flatmaps</a></li>
<li class="toctree-l3"><a class="reference internal" href="iblatlas.genomics.html">iblatlas.genomics</a></li>
<li class="toctree-l3"><a class="reference internal" href="iblatlas.plots.html">iblatlas.plots</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">iblatlas.regions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#terminology">Terminology</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iblatlas.regions.FranklinPaxinosRegions"><code class="docutils literal notranslate"><span class="pre">FranklinPaxinosRegions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#iblatlas.regions.BrainRegions"><code class="docutils literal notranslate"><span class="pre">BrainRegions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#iblatlas.regions.regions_from_allen_csv"><code class="docutils literal notranslate"><span class="pre">regions_from_allen_csv()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="iblutil.html">iblutil</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBL Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../010_api_reference.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="iblatlas.html">iblatlas</a></li>
      <li class="breadcrumb-item active">iblatlas.regions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/iblatlas.regions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-iblatlas.regions">
<span id="iblatlas-regions"></span><h1>iblatlas.regions<a class="headerlink" href="#module-iblatlas.regions" title="Link to this heading"></a></h1>
<p>Brain region mappings.</p>
<p>Four mappings are currently available within the IBL, these are:</p>
<ul class="simple">
<li><p>Allen Atlas - total of 1328 annotation regions provided by Allen Atlas.</p></li>
<li><p>Beryl Atlas - total of 308 annotation regions determined by Nick Steinmetz for the brain wide map, mainly at the level of
major cortical areas, nuclei/ganglia. Thus annotations relating to layers and nuclear subregions are absent.</p></li>
<li><p>Cosmos Atlas - total of 10 annotation regions determined by Nick Steinmetz for coarse analysis.  Annotations include the major
divisions of the brain only.</p></li>
<li><p>Swanson Atlas - total of 319 annotation regions provided by the Swanson atlas (FIXME which one?).</p></li>
</ul>
<section id="terminology">
<h2>Terminology<a class="headerlink" href="#terminology" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>Name</strong> - The full anatomical name of a brain region.</p></li>
<li><p><strong>Acronymn</strong> - A shortened version of a brain region name.</p></li>
<li><p><strong>Index</strong> - The index of the of the brain region within the ordered list of brain regions.</p></li>
<li><p><strong>ID</strong> - A unique numerical identifier of a brain region.  These are typically integers that
therefore take up less space than storing the region names or acronyms.</p></li>
<li><p><strong>Mapping</strong> - A function that maps one ordered list of brain region IDs to another, allowing one
to control annotation granularity and brain region hierarchy, or to translate brain region names
from one atlas to another. The default mapping is identity. See
[atlas package documentation](./ibllib.atlas.html#mappings) for other mappings.</p></li>
<li><p><strong>Order</strong> - Each structure is assigned a consistent position within the flattened graph. This
value is known as the annotation index, i.e. the annotation volume contains the brain region
order at each point in the image.</p></li>
</ul>
<p>FIXME Document the two structure trees. Which Website did they come from, and which publication/edition?</p>
</section>
<p class="rubric">Functions</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#iblatlas.regions.regions_from_allen_csv" title="iblatlas.regions.regions_from_allen_csv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">regions_from_allen_csv</span></code></a></p></td>
<td><p>(DEPRECATED) Reads csv file containing the ALlen Ontology and instantiates a BrainRegions object.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#iblatlas.regions.BrainRegions" title="iblatlas.regions.BrainRegions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BrainRegions</span></code></a></p></td>
<td><p>A struct of Allen brain regions, their names, IDs, relationships and associated plot colours.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#iblatlas.regions.FranklinPaxinosRegions" title="iblatlas.regions.FranklinPaxinosRegions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FranklinPaxinosRegions</span></code></a></p></td>
<td><p>Mouse Brain in Stereotaxic Coordinates (MBSC).</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="iblatlas.regions.FranklinPaxinosRegions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FranklinPaxinosRegions</span></span><a class="reference internal" href="../_modules/iblatlas/regions.html#FranklinPaxinosRegions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#iblatlas.regions.FranklinPaxinosRegions" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_BrainRegions</span></code></p>
<p>Mouse Brain in Stereotaxic Coordinates (MBSC).</p>
<p>Paxinos G, and Franklin KBJ (2012). The Mouse Brain in Stereotaxic Coordinates, 4th edition (Elsevier Academic Press).</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="iblatlas.regions.BrainRegions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BrainRegions</span></span><a class="reference internal" href="../_modules/iblatlas/regions.html#BrainRegions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#iblatlas.regions.BrainRegions" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_BrainRegions</span></code></p>
<p>A struct of Allen brain regions, their names, IDs, relationships and associated plot colours.</p>
<p>iblatlas.regions.BrainRegions(brainmap=’Allen’)</p>
<p class="rubric">Notes</p>
<p>The Allen atlas IDs are kept intact but lateralized as follows: labels are duplicated
and IDs multiplied by -1, with the understanding that left hemisphere regions have negative
IDs.</p>
<dl class="py method">
<dt class="sig sig-object py" id="iblatlas.regions.BrainRegions.compute_hierarchy">
<span class="sig-name descname"><span class="pre">compute_hierarchy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iblatlas/regions.html#BrainRegions.compute_hierarchy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#iblatlas.regions.BrainRegions.compute_hierarchy" title="Link to this definition"></a></dt>
<dd><p>Creates a self.hierarchy attribute that is an n_levels by n_region array
of indices. This is useful to perform fast vectorized computations of
ancestors and descendants.
:return:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="iblatlas.regions.BrainRegions.propagate_down">
<span class="sig-name descname"><span class="pre">propagate_down</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">acronyms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iblatlas/regions.html#BrainRegions.propagate_down"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#iblatlas.regions.BrainRegions.propagate_down" title="Link to this definition"></a></dt>
<dd><p>This function remaps a set of user specified acronyms and values to the
swanson map, by filling down the child nodes when higher up values are
provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>acronyms</strong> – list or array of allen ids or acronyms</p></li>
<li><p><strong>values</strong> – list or array of associated values</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
<p># FIXME Why only the swanson map? Also, how is this actually related to the Swanson map?</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="iblatlas.regions.BrainRegions.remap">
<span class="sig-name descname"><span class="pre">remap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">region_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_map</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Allen'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_map</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Beryl'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iblatlas/regions.html#BrainRegions.remap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#iblatlas.regions.BrainRegions.remap" title="Link to this definition"></a></dt>
<dd><p>Remap atlas regions IDs from source map to target map.</p>
<p>Any NaNs in <cite>region_ids</cite> remain as NaN in the output array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>region_ids</strong> (<em>array_like</em><em> of </em><em>int</em>) – The region IDs to remap.</p></li>
<li><p><strong>source_map</strong> (<em>str</em><em> | </em><em>np.array</em>) – if string, it should be a key existing in self.mappings such as ‘Allen’, ‘Cosmos’ or ‘Beryl’
if np.array, it should be a [nregions,] array containing the mapped regions index such as
mapping[original_allen_region_index] = target_mapping_region_index</p></li>
<li><p><strong>target_map</strong> (<em>str</em><em> | </em><em>np.array</em>) – if string, it should be a key existing in self.mappings such as ‘Allen’, ‘Cosmos’ or ‘Beryl’
if np.array, it should be a [nregions,] array containing the mapped regions index such as
mapping[original_allen_region_index] = target_mapping_region_index</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The input IDs mapped to <cite>target_map</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.array of int</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="iblatlas.regions.regions_from_allen_csv">
<span class="sig-name descname"><span class="pre">regions_from_allen_csv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iblatlas/regions.html#regions_from_allen_csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#iblatlas.regions.regions_from_allen_csv" title="Link to this definition"></a></dt>
<dd><p>(DEPRECATED) Reads csv file containing the ALlen Ontology and instantiates a BrainRegions object.</p>
<p>NB: Instantiate BrainRegions directly instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>BrainRegions object</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="iblatlas.plots.html" class="btn btn-neutral float-left" title="iblatlas.plots" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="iblutil.html" class="btn btn-neutral float-right" title="iblutil" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, International Brain Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>