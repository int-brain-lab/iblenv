<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>brainbox.behavior.training &mdash; IBL Library  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/css/style.css?v=17142d56" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="brainbox.behavior.training.TRIALS_KEYS" href="brainbox.behavior.training.TRIALS_KEYS.html" />
    <link rel="prev" title="brainbox.behavior.dlc" href="brainbox.behavior.dlc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            IBL Library
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The Open Neurophysiology Environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/one_quickstart.html">ONE Quick Start</a></li>
<li class="toctree-l1"><a class="reference external" href="https://int-brain-lab.github.io/ONE/">Full documentation Website for ONE</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Public</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/public_introduction.html">Publicly available IBL data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_behavior.html">Data Release - Behavior</a></li>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/data_release_pilot.html">Data Release - Pilot Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_repro_ephys.html">Data Release - Reproducible Ephys Paper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_brainwidemap.html">Data Release - Brain Wide Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_spikesorting_benchmarks.html">Data Release - Spike sorting benchmark datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/information_contact.html">Information and troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Exploring IBL Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_structure.html">Get to know the datasets and folder structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_download.html">Download the public datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../loading_examples.html">Loading Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../02_installation.html">Unified Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_contribution.html">How to contribute</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples &amp; Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../atlas_examples.html">Atlas Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/docs_wheel_moves.html">Working with wheel data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../010_api_reference.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ibllib.html">ibllib</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="brainbox.html">brainbox</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="brainbox.atlas.html">brainbox.atlas</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="brainbox.behavior.html">brainbox.behavior</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="brainbox.behavior.dlc.html">brainbox.behavior.dlc</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">brainbox.behavior.training</a></li>
<li class="toctree-l4"><a class="reference internal" href="brainbox.behavior.wheel.html">brainbox.behavior.wheel</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.core.html">brainbox.core</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.ephys_plots.html">brainbox.ephys_plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.io.html">brainbox.io</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.lfp.html">brainbox.lfp</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.metrics.html">brainbox.metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.plot.html">brainbox.plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.plot_base.html">brainbox.plot_base</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.population.html">brainbox.population</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.processing.html">brainbox.processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.quality.html">brainbox.quality</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.singlecell.html">brainbox.singlecell</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.spike_features.html">brainbox.spike_features</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.task.html">brainbox.task</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.tests.html">brainbox.tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="brainbox.video.html">brainbox.video</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="iblatlas.html">iblatlas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBL Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../010_api_reference.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="brainbox.html">brainbox</a></li>
          <li class="breadcrumb-item"><a href="brainbox.behavior.html">brainbox.behavior</a></li>
      <li class="breadcrumb-item active">brainbox.behavior.training</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/brainbox.behavior.training.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-brainbox.behavior.training">
<span id="brainbox-behavior-training"></span><h1>brainbox.behavior.training<a class="headerlink" href="#module-brainbox.behavior.training" title="Link to this heading"></a></h1>
<p>Computing and testing IBL training status criteria.</p>
<p>For an in-depth description of each training status, see <a class="reference external" href="https://figshare.com/articles/preprint/A_standardized_and_reproducible_method_to_measure_decision-making_in_mice_Appendix_2_IBL_protocol_for_mice_training/11634729">Appendix 2</a> of the IBL Protocol For Mice
Training.</p>
<p class="rubric">Examples</p>
<p>Plot the psychometric curve for a given session.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trials</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">()</span><span class="o">.</span><span class="n">load_object</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;trials&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fix</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plot_psychometric</span><span class="p">(</span><span class="n">trials</span><span class="p">)</span>
</pre></div>
</div>
<p>Compute ‘response times’, defined as the duration of open-loop for each contrast.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">reaction_time</span><span class="p">,</span> <span class="n">contrasts</span><span class="p">,</span> <span class="n">n_contrasts</span> <span class="o">=</span> <span class="n">compute_reaction_time</span><span class="p">(</span><span class="n">trials</span><span class="p">)</span>
</pre></div>
</div>
<p>Compute ‘reaction times’, defined as the time between go cue and first detected movement.
NB: These may be negative!</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">reaction_time</span><span class="p">,</span> <span class="n">contrasts</span><span class="p">,</span> <span class="n">n_contrasts</span> <span class="o">=</span> <span class="n">compute_reaction_time</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">trials</span><span class="p">,</span> <span class="n">stim_on_type</span><span class="o">=</span><span class="s1">&#39;goCue_times&#39;</span><span class="p">,</span> <span class="n">stim_off_type</span><span class="o">=</span><span class="s1">&#39;firstMovement_times&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Compute ‘response times’, defined as the time between first detected movement and response.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">reaction_time</span><span class="p">,</span> <span class="n">contrasts</span><span class="p">,</span> <span class="n">n_contrasts</span> <span class="o">=</span> <span class="n">compute_reaction_time</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">trials</span><span class="p">,</span> <span class="n">stim_on_type</span><span class="o">=</span><span class="s1">&#39;firstMovement_times&#39;</span><span class="p">,</span> <span class="n">stim_off_type</span><span class="o">=</span><span class="s1">&#39;response_times&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Compute ‘movement times’, defined as the time between last detected movement and response threshold.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">brainbox.behavior.wheel</span> <span class="k">as</span> <span class="nn">wh</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wheel_moves</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">()</span><span class="o">.</span><span class="n">load_object</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;wheeMoves&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trials</span><span class="p">[</span><span class="s1">&#39;lastMovement_times&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wh</span><span class="o">.</span><span class="n">get_movement_onset</span><span class="p">(</span><span class="n">wheel_moves</span><span class="o">.</span><span class="n">intervals</span><span class="p">,</span> <span class="n">trial_data</span><span class="o">.</span><span class="n">response_times</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reaction_time</span><span class="p">,</span> <span class="n">contrasts</span><span class="p">,</span> <span class="n">n_contrasts</span> <span class="o">=</span> <span class="n">compute_reaction_time</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">trials</span><span class="p">,</span> <span class="n">stim_on_type</span><span class="o">=</span><span class="s1">&#39;lastMovement_times&#39;</span><span class="p">,</span> <span class="n">stim_off_type</span><span class="o">=</span><span class="s1">&#39;response_times&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Module attributes</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="brainbox.behavior.training.TRIALS_KEYS.html#brainbox.behavior.training.TRIALS_KEYS" title="brainbox.behavior.training.TRIALS_KEYS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TRIALS_KEYS</span></code></a></p></td>
<td><p>The required keys in the trials object for computing training status.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Functions</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.training.compute_bias_info" title="brainbox.behavior.training.compute_bias_info"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_bias_info</span></code></a></p></td>
<td><p>Compute all relevant performance metrics for when subject is on biasedChoiceWorld</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.training.compute_median_reaction_time" title="brainbox.behavior.training.compute_median_reaction_time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_median_reaction_time</span></code></a></p></td>
<td><p>Compute median response time on zero contrast trials from trials object</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.training.compute_n_trials" title="brainbox.behavior.training.compute_n_trials"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_n_trials</span></code></a></p></td>
<td><p>Compute number of trials in trials object</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.training.compute_performance" title="brainbox.behavior.training.compute_performance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_performance</span></code></a></p></td>
<td><p>Compute performance on all trials at each contrast level from trials object</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.training.compute_performance_easy" title="brainbox.behavior.training.compute_performance_easy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_performance_easy</span></code></a></p></td>
<td><p>Compute performance on easy trials (stimulus &gt;= 50 %) from trials object</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.training.compute_psychometric" title="brainbox.behavior.training.compute_psychometric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_psychometric</span></code></a></p></td>
<td><p>Compute psychometric fit parameters for trials object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.training.compute_reaction_time" title="brainbox.behavior.training.compute_reaction_time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_reaction_time</span></code></a></p></td>
<td><p>Compute median response time for all contrasts.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.training.compute_training_info" title="brainbox.behavior.training.compute_training_info"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_training_info</span></code></a></p></td>
<td><p>Compute all relevant performance metrics for when subject is on trainingChoiceWorld.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.training.concatenate_trials" title="brainbox.behavior.training.concatenate_trials"><code class="xref py py-obj docutils literal notranslate"><span class="pre">concatenate_trials</span></code></a></p></td>
<td><p>Concatenate trials from different training sessions.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.training.criterion_1a" title="brainbox.behavior.training.criterion_1a"><code class="xref py py-obj docutils literal notranslate"><span class="pre">criterion_1a</span></code></a></p></td>
<td><p>Returns bool indicating whether criteria for status 'trained_1a' are met.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.training.criterion_1b" title="brainbox.behavior.training.criterion_1b"><code class="xref py py-obj docutils literal notranslate"><span class="pre">criterion_1b</span></code></a></p></td>
<td><p>Returns bool indicating whether criteria for trained_1b are met.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.training.criterion_delay" title="brainbox.behavior.training.criterion_delay"><code class="xref py py-obj docutils literal notranslate"><span class="pre">criterion_delay</span></code></a></p></td>
<td><p>Returns bool indicating whether criteria for 'ready4delay' is met.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.training.criterion_ephys" title="brainbox.behavior.training.criterion_ephys"><code class="xref py py-obj docutils literal notranslate"><span class="pre">criterion_ephys</span></code></a></p></td>
<td><p>Returns bool indicating whether criteria for ready4ephysrig or ready4recording are met.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.training.display_status" title="brainbox.behavior.training.display_status"><code class="xref py py-obj docutils literal notranslate"><span class="pre">display_status</span></code></a></p></td>
<td><p>Display training status of subject to terminal.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.training.get_lab_training_status" title="brainbox.behavior.training.get_lab_training_status"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_lab_training_status</span></code></a></p></td>
<td><p>Computes the training status of all alive and water restricted subjects in a specified lab.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.training.get_sessions" title="brainbox.behavior.training.get_sessions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sessions</span></code></a></p></td>
<td><p>Download and load in training data for a specified subject.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.training.get_signed_contrast" title="brainbox.behavior.training.get_signed_contrast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_signed_contrast</span></code></a></p></td>
<td><p>Compute signed contrast from trials object</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.training.get_subject_training_status" title="brainbox.behavior.training.get_subject_training_status"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_subject_training_status</span></code></a></p></td>
<td><p>Computes the training status of specified subject and prints results to std out.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.training.get_training_status" title="brainbox.behavior.training.get_training_status"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_training_status</span></code></a></p></td>
<td><p>Compute training status of a subject from consecutive training datasets.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.training.plot_psychometric" title="brainbox.behavior.training.plot_psychometric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_psychometric</span></code></a></p></td>
<td><p>Function to plot psychometric curve plots a la datajoint webpage.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.training.plot_reaction_time" title="brainbox.behavior.training.plot_reaction_time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_reaction_time</span></code></a></p></td>
<td><p>Function to plot reaction time against contrast a la datajoint webpage.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#brainbox.behavior.training.plot_reaction_time_over_trials" title="brainbox.behavior.training.plot_reaction_time_over_trials"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_reaction_time_over_trials</span></code></a></p></td>
<td><p>Function to plot reaction time with trial number a la datajoint webpage.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.training.query_criterion" title="brainbox.behavior.training.query_criterion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_criterion</span></code></a></p></td>
<td><p>Get the session for which a given training criterion was met.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#brainbox.behavior.training.TrainingStatus" title="brainbox.behavior.training.TrainingStatus"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TrainingStatus</span></code></a></p></td>
<td><p>Standard IBL training criteria.</p></td>
</tr>
</tbody>
</table>
<dl class="py data">
<dt class="sig sig-object py" id="brainbox.behavior.training.TRIALS_KEYS">
<span class="sig-name descname"><span class="pre">TRIALS_KEYS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['contrastLeft',</span> <span class="pre">'contrastRight',</span> <span class="pre">'feedbackType',</span> <span class="pre">'probabilityLeft',</span> <span class="pre">'choice',</span> <span class="pre">'response_times',</span> <span class="pre">'stimOn_times']</span></em><a class="headerlink" href="#brainbox.behavior.training.TRIALS_KEYS" title="Link to this definition"></a></dt>
<dd><p>The required keys in the trials object for computing training status.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="brainbox.behavior.training.TrainingStatus">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TrainingStatus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#TrainingStatus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.TrainingStatus" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">IntFlag</span></code></p>
<p>Standard IBL training criteria.</p>
<p>Enumeration allows for comparisons between training status.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;ready4delay&#39;</span>
<span class="gp">... </span><span class="k">assert</span> <span class="n">TrainingStatus</span><span class="p">[</span><span class="n">status</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span> <span class="ow">is</span> <span class="n">TrainingStatus</span><span class="o">.</span><span class="n">READY4DELAY</span>
<span class="gp">... </span><span class="k">assert</span> <span class="n">TrainingStatus</span><span class="p">[</span><span class="n">status</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">TrainingStatus</span><span class="o">.</span><span class="n">FAILED</span><span class="p">,</span> <span class="s1">&#39;Subject failed training&#39;</span>
<span class="gp">... </span><span class="k">assert</span> <span class="n">TrainingStatus</span><span class="p">[</span><span class="n">status</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span> <span class="o">&gt;=</span> <span class="n">TrainingStatus</span><span class="o">.</span><span class="n">TRAINED</span><span class="p">,</span> <span class="s1">&#39;Subject untrained&#39;</span>
<span class="gp">... </span><span class="k">assert</span> <span class="n">TrainingStatus</span><span class="p">[</span><span class="n">status</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span> <span class="o">&gt;</span> <span class="n">TrainingStatus</span><span class="o">.</span><span class="n">IN_TRAINING</span><span class="p">,</span> <span class="s1">&#39;Subject untrained&#39;</span>
<span class="gp">... </span><span class="k">assert</span> <span class="n">TrainingStatus</span><span class="p">[</span><span class="n">status</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span> <span class="ow">in</span> <span class="o">~</span><span class="n">TrainingStatus</span><span class="o">.</span><span class="n">FAILED</span><span class="p">,</span> <span class="s1">&#39;Subject untrained&#39;</span>
<span class="gp">... </span><span class="k">assert</span> <span class="n">TrainingStatus</span><span class="p">[</span><span class="n">status</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span> <span class="ow">in</span> <span class="n">TrainingStatus</span><span class="o">.</span><span class="n">TRAINED</span> <span class="o">^</span> <span class="n">TrainingStatus</span><span class="o">.</span><span class="n">READY</span>
</pre></div>
</div>
<p>Get the next training status</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">member</span> <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">TrainingStatus</span><span class="p">)</span> <span class="k">if</span> <span class="n">member</span> <span class="o">&gt;</span> <span class="n">TrainingStatus</span><span class="p">[</span><span class="n">status</span><span class="o">.</span><span class="n">upper</span><span class="p">()])</span>
<span class="go">&lt;TrainingStatus.READY4RECORDING: 128&gt;</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>~TrainingStatus.TRAINED means any status but trained 1a or trained 1b.</p></li>
<li><p>A subject may acheive both TRAINED_1A and TRAINED_1B within a single session, therefore it
is possible to have skipped the TRAINED_1A session status.</p></li>
</ul>
<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.behavior.training.TrainingStatus.UNTRAINABLE">
<span class="sig-name descname"><span class="pre">UNTRAINABLE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#brainbox.behavior.training.TrainingStatus.UNTRAINABLE" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.behavior.training.TrainingStatus.UNBIASABLE">
<span class="sig-name descname"><span class="pre">UNBIASABLE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#brainbox.behavior.training.TrainingStatus.UNBIASABLE" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.behavior.training.TrainingStatus.IN_TRAINING">
<span class="sig-name descname"><span class="pre">IN_TRAINING</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4</span></em><a class="headerlink" href="#brainbox.behavior.training.TrainingStatus.IN_TRAINING" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.behavior.training.TrainingStatus.TRAINED_1A">
<span class="sig-name descname"><span class="pre">TRAINED_1A</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">8</span></em><a class="headerlink" href="#brainbox.behavior.training.TrainingStatus.TRAINED_1A" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.behavior.training.TrainingStatus.TRAINED_1B">
<span class="sig-name descname"><span class="pre">TRAINED_1B</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">16</span></em><a class="headerlink" href="#brainbox.behavior.training.TrainingStatus.TRAINED_1B" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.behavior.training.TrainingStatus.READY4EPHYSRIG">
<span class="sig-name descname"><span class="pre">READY4EPHYSRIG</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">32</span></em><a class="headerlink" href="#brainbox.behavior.training.TrainingStatus.READY4EPHYSRIG" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.behavior.training.TrainingStatus.READY4DELAY">
<span class="sig-name descname"><span class="pre">READY4DELAY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">64</span></em><a class="headerlink" href="#brainbox.behavior.training.TrainingStatus.READY4DELAY" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.behavior.training.TrainingStatus.READY4RECORDING">
<span class="sig-name descname"><span class="pre">READY4RECORDING</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">128</span></em><a class="headerlink" href="#brainbox.behavior.training.TrainingStatus.READY4RECORDING" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.behavior.training.TrainingStatus.FAILED">
<span class="sig-name descname"><span class="pre">FAILED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#brainbox.behavior.training.TrainingStatus.FAILED" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.behavior.training.TrainingStatus.READY">
<span class="sig-name descname"><span class="pre">READY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">224</span></em><a class="headerlink" href="#brainbox.behavior.training.TrainingStatus.READY" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="brainbox.behavior.training.TrainingStatus.TRAINED">
<span class="sig-name descname"><span class="pre">TRAINED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">24</span></em><a class="headerlink" href="#brainbox.behavior.training.TrainingStatus.TRAINED" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.get_lab_training_status">
<span class="sig-name descname"><span class="pre">get_lab_training_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lab</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">details</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#get_lab_training_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.get_lab_training_status" title="Link to this definition"></a></dt>
<dd><p>Computes the training status of all alive and water restricted subjects in a specified lab.</p>
<p>The response are printed to std out.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lab</strong> (<em>str</em>) – Lab name (must match the name registered on Alyx).</p></li>
<li><p><strong>date</strong> (<em>str</em>) – The ISO date from which to compute training status. If not specified will compute from the
latest date with available data.  Format should be ‘YYYY-MM-DD’.</p></li>
<li><p><strong>details</strong> (<em>bool</em>) – Whether to display all information about training status computation e.g. performance,
number of trials, psychometric fit parameters.</p></li>
<li><p><strong>one</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.api.html#one.api.OneAlyx" title="(in ONE)"><em>one.api.OneAlyx</em></a>) – An instance of ONE.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.get_subject_training_status">
<span class="sig-name descname"><span class="pre">get_subject_training_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">details</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#get_subject_training_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.get_subject_training_status" title="Link to this definition"></a></dt>
<dd><p>Computes the training status of specified subject and prints results to std out.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subj</strong> (<em>str</em>) – Subject nickname (must match the name registered on Alyx).</p></li>
<li><p><strong>date</strong> (<em>str</em>) – The ISO date from which to compute training status. If not specified will compute from the
latest date with available data.  Format should be ‘YYYY-MM-DD’.</p></li>
<li><p><strong>details</strong> (<em>bool</em>) – Whether to display all information about training status computation e.g. performance,
number of trials, psychometric fit parameters.</p></li>
<li><p><strong>one</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.api.html#one.api.OneAlyx" title="(in ONE)"><em>one.api.OneAlyx</em></a>) – An instance of ONE.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.get_sessions">
<span class="sig-name descname"><span class="pre">get_sessions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#get_sessions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.get_sessions" title="Link to this definition"></a></dt>
<dd><p>Download and load in training data for a specified subject. If a date is given it will load
data from the three (or as many as are available) previous sessions up to the specified date.
If not it will load data from the last three training sessions that have data available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subj</strong> (<em>str</em>) – Subject nickname (must match the name registered on Alyx).</p></li>
<li><p><strong>date</strong> (<em>str</em>) – The ISO date from which to compute training status. If not specified will compute from the
latest date with available data.  Format should be ‘YYYY-MM-DD’.</p></li>
<li><p><strong>one</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.api.html#one.api.OneAlyx" title="(in ONE)"><em>one.api.OneAlyx</em></a>) – An instance of ONE.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>iblutil.util.Bunch</em> – Dictionary of trials objects where each key is the ISO session date string.</p></li>
<li><p><em>list of str</em> – List of the task protocol used for each of the sessions.</p></li>
<li><p><em>list of str</em> – List of ISO date strings where training was conducted on ephys rig. Empty list if all
sessions on training rig.</p></li>
<li><p><strong>n_delay</strong> (<em>int</em>) – Number of sessions on ephys rig that had delay prior to starting session &gt; 15min.
Returns 0 if no sessions detected.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.get_training_status">
<span class="sig-name descname"><span class="pre">get_training_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_protocol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ephys_sess_dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_delay</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#get_training_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.get_training_status" title="Link to this definition"></a></dt>
<dd><p>Compute training status of a subject from consecutive training datasets.</p>
<p>For IBL, training status is calculated using trials from the last three consecutive sessions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trials</strong> (<em>dict</em><em> of </em><em>str</em>) – Dictionary of trials objects where each key is the ISO session date string.</p></li>
<li><p><strong>task_protocol</strong> (<em>list</em><em> of </em><em>str</em>) – Task protocol used for each training session in <cite>trials</cite>, can be ‘training’, ‘biased’ or
‘ephys’.</p></li>
<li><p><strong>ephys_sess_dates</strong> (<em>list</em><em> of </em><em>str</em>) – List of ISO date strings where training was conducted on ephys rig. Empty list if all
sessions on training rig.</p></li>
<li><p><strong>n_delay</strong> (<em>int</em>) – Number of sessions on ephys rig that had delay prior to starting session &gt; 15min.
Returns 0 if no sessions detected.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>str</em> – Training status of the subject.</p></li>
<li><p><em>iblutil.util.Bunch</em> – Bunch containing performance metrics that decide training status i.e. performance on easy
trials, number of trials, psychometric fit parameters, reaction time.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.display_status">
<span class="sig-name descname"><span class="pre">display_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sess_dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perf_easy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_trials</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psych</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psych_20</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psych_80</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#display_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.display_status" title="Link to this definition"></a></dt>
<dd><p>Display training status of subject to terminal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subj</strong> (<em>str</em>) – Subject nickname (must match the name registered on Alyx).</p></li>
<li><p><strong>sess_dates</strong> (<em>list</em><em> of </em><em>str</em>) – ISO date strings of training sessions used to determine training status.</p></li>
<li><p><strong>status</strong> (<em>str</em>) – Training status of subject.</p></li>
<li><p><strong>perf_easy</strong> (<em>numpy.array</em>) – Proportion of correct high contrast trials for each training session.</p></li>
<li><p><strong>n_trials</strong> (<em>numpy.array</em>) – Total number of trials for each training session.</p></li>
<li><p><strong>psych</strong> (<em>numpy.array</em>) – Psychometric parameters fit to data from all training sessions - bias, threshold, lapse
high, lapse low.</p></li>
<li><p><strong>psych_20</strong> (<em>numpy.array</em>) – The fit psychometric parameters for the blocks where probability of a left stimulus is 0.2.</p></li>
<li><p><strong>psych_80</strong> (<em>numpy.array</em>) – The fit psychometric parameters for the blocks where probability of a left stimulus is 0.8.</p></li>
<li><p><strong>rt</strong> (<em>float</em>) – The median response time for zero contrast trials across all training sessions. NaN
indicates no zero contrast stimuli in training sessions.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.concatenate_trials">
<span class="sig-name descname"><span class="pre">concatenate_trials</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#concatenate_trials"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.concatenate_trials" title="Link to this definition"></a></dt>
<dd><p>Concatenate trials from different training sessions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>trials</strong> (<em>dict</em><em> of </em><em>str</em>) – Dictionary of trials objects where each key is the ISO session date string.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Trials object with data concatenated over three training sessions.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.alf.io.html#one.alf.io.AlfBunch" title="(in ONE)">one.alf.io.AlfBunch</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.compute_training_info">
<span class="sig-name descname"><span class="pre">compute_training_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trials_all</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#compute_training_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.compute_training_info" title="Link to this definition"></a></dt>
<dd><p>Compute all relevant performance metrics for when subject is on trainingChoiceWorld.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trials</strong> (<em>dict</em><em> of </em><em>str</em>) – Dictionary of trials objects where each key is the ISO session date string.</p></li>
<li><p><strong>trials_all</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.alf.io.html#one.alf.io.AlfBunch" title="(in ONE)"><em>one.alf.io.AlfBunch</em></a>) – Trials object with data concatenated over three training sessions.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>numpy.array</em> – Proportion of correct high contrast trials for each session.</p></li>
<li><p><em>numpy.array</em> – Total number of trials for each training session.</p></li>
<li><p><em>numpy.array</em> – Array of psychometric parameters fit to <cite>all_trials</cite> - bias, threshold, lapse high,
lapse low.</p></li>
<li><p><em>float</em> – The median response time for all zero-contrast trials across all sessions. Returns NaN if
no trials zero-contrast trials).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.compute_bias_info">
<span class="sig-name descname"><span class="pre">compute_bias_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trials_all</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#compute_bias_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.compute_bias_info" title="Link to this definition"></a></dt>
<dd><p>Compute all relevant performance metrics for when subject is on biasedChoiceWorld</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>trials</strong> – dict containing trials objects from three consecutive training sessions,</p>
</dd>
</dl>
<p>keys are session dates
:type trials: Bunch
:param trials_all: trials object with data concatenated over three training sessions
:type trials_all: Bunch
:returns:</p>
<blockquote>
<div><ul class="simple">
<li><p>perf_easy - performance of easy trials for each session</p></li>
<li><p>n_trials - number of trials in each session</p></li>
<li><p>psych_20 - parameters for psychometric curve fit to trials in 20 block over all sessions</p></li>
<li><p>psych_80 - parameters for psychometric curve fit to trials in 80 block over all sessions</p></li>
<li><p>rt - median reaction time for zero contrast stimuli over all sessions</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.get_signed_contrast">
<span class="sig-name descname"><span class="pre">get_signed_contrast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#get_signed_contrast"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.get_signed_contrast" title="Link to this definition"></a></dt>
<dd><p>Compute signed contrast from trials object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>trials</strong> (<em>dict</em>) – trials object that must contain contrastLeft and contrastRight keys</p>
</dd>
</dl>
<p>returns: array of signed contrasts in percent, where -ve values are on the left</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.compute_performance_easy">
<span class="sig-name descname"><span class="pre">compute_performance_easy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#compute_performance_easy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.compute_performance_easy" title="Link to this definition"></a></dt>
<dd><p>Compute performance on easy trials (stimulus &gt;= 50 %) from trials object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>trials</strong> – trials object that must contain contrastLeft, contrastRight and feedbackType</p>
</dd>
</dl>
<p>keys
:type trials: dict
returns: float containing performance on easy contrast trials</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.compute_performance">
<span class="sig-name descname"><span class="pre">compute_performance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signed_contrast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prob_right</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#compute_performance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.compute_performance" title="Link to this definition"></a></dt>
<dd><p>Compute performance on all trials at each contrast level from trials object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>trials</strong> – trials object that must contain contrastLeft, contrastRight and feedbackType</p>
</dd>
</dl>
<p>keys
:type trials: dict
returns: float containing performance on easy contrast trials</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.compute_n_trials">
<span class="sig-name descname"><span class="pre">compute_n_trials</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#compute_n_trials"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.compute_n_trials" title="Link to this definition"></a></dt>
<dd><p>Compute number of trials in trials object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>trials</strong> (<em>dict</em>) – trials object</p>
</dd>
</dl>
<p>returns: int containing number of trials in session</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.compute_psychometric">
<span class="sig-name descname"><span class="pre">compute_psychometric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signed_contrast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plotting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compute_ci</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.032</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#compute_psychometric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.compute_psychometric" title="Link to this definition"></a></dt>
<dd><p>Compute psychometric fit parameters for trials object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trials</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.alf.io.html#one.alf.io.AlfBunch" title="(in ONE)"><em>one.alf.io.AlfBunch</em></a>) – An ALF trials object containing the keys {‘probabilityLeft’, ‘contrastLeft’,
‘contrastRight’, ‘feedbackType’, ‘choice’, ‘response_times’, ‘stimOn_times’}.</p></li>
<li><p><strong>signed_contrast</strong> (<em>numpy.array</em>) – An array of signed contrasts in percent the length of trials, where left contrasts are -ve.
If None, these are computed from the trials object.</p></li>
<li><p><strong>block</strong> (<em>float</em>) – The block type to compute. If None, all trials are included, otherwise only trials where
probabilityLeft matches this value are included.  For biasedChoiceWorld, the
probabilityLeft set is {0.5, 0.2, 0.8}.</p></li>
<li><p><strong>plotting</strong> (<em>bool</em>) – Which set of psychofit model parameters to use (see notes).</p></li>
<li><p><strong>compute_ci</strong> (<em>bool</em>) – If true, computes and returns the confidence intervals for response at each contrast.</p></li>
<li><p><strong>alpha</strong> (<em>float</em><em>, </em><em>default=0.032</em>) – Significance level for confidence interval. Must be in (0, 1). If <cite>compute_ci</cite> is false,
this value is ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>numpy.array</em> – Array of psychometric fit parameters - bias, threshold, lapse high, lapse low.</p></li>
<li><p><em>(tuple of numpy.array)</em> – If <cite>compute_ci</cite> is true, a tuple of</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">statsmodels.stats.proportion.proportion_confint</span></code></dt><dd><p>interval.</p>
</dd>
</dl>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">psychofit.mle_fit_psycho</span></code></p>
</div>
<p class="rubric">Notes</p>
<p>The psychofit starting parameters and model constraints used for the fit when computing the
training status (e.g. trained_1a, etc.) are sub-optimal and can produce a poor fit. To keep
the precise criteria the same for all subjects, these parameters have not changed. To produce a
better fit for plotting purposes, or to calculate the training status in a manner inconsistent
with the IBL training pipeline, use plotting=True.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.compute_median_reaction_time">
<span class="sig-name descname"><span class="pre">compute_median_reaction_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stim_on_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'stimOn_times'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contrast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signed_contrast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#compute_median_reaction_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.compute_median_reaction_time" title="Link to this definition"></a></dt>
<dd><p>Compute median response time on zero contrast trials from trials object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trials</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.alf.io.html#one.alf.io.AlfBunch" title="(in ONE)"><em>one.alf.io.AlfBunch</em></a>) – An ALF trials object containing the keys {‘probabilityLeft’, ‘contrastLeft’,
‘contrastRight’, ‘feedbackType’, ‘choice’, ‘response_times’, ‘stimOn_times’}.</p></li>
<li><p><strong>stim_on_type</strong> (<em>str</em><em>, </em><em>default='stimOn_times'</em>) – The trials key to use when calculating the response times. The difference between this and
‘feedback_times’ is used (see notes).</p></li>
<li><p><strong>contrast</strong> (<em>float</em>) – If None, the median response time is calculated for all trials, regardless of contrast,
otherwise only trials where the matching signed percent contrast was presented are used.</p></li>
<li><p><strong>signed_contrast</strong> (<em>numpy.array</em>) – An array of signed contrasts in percent the length of trials, where left contrasts are -ve.
If None, these are computed from the trials object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The median response time for trials with <cite>contrast</cite> (returns NaN if no trials matching
<cite>contrast</cite> in trials object).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The <cite>stim_on_type</cite> is ‘stimOn_times’ by default, however for IBL rig data, the photodiode is
sometimes not calibrated properly which can lead to inaccurate (or absent, i.e. NaN) stim on
times. Therefore, it is sometimes more accurate to use the ‘stimOnTrigger_times’ (the time of
the stimulus onset command), if available, or the ‘goCue_times’ (the time of the soundcard
output TTL when the audio go cue is played) or the ‘goCueTrigger_times’ (the time of the
audio go cue command).</p></li>
<li><p>The response/reaction time here is defined as the time between stim on and feedback, i.e. the
entire open-loop trial duration.</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.compute_reaction_time">
<span class="sig-name descname"><span class="pre">compute_reaction_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stim_on_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'stimOn_times'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stim_off_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'response_times'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signed_contrast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compute_ci</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.32</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#compute_reaction_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.compute_reaction_time" title="Link to this definition"></a></dt>
<dd><p>Compute median response time for all contrasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trials</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.alf.io.html#one.alf.io.AlfBunch" title="(in ONE)"><em>one.alf.io.AlfBunch</em></a>) – An ALF trials object containing the keys {‘probabilityLeft’, ‘contrastLeft’,
‘contrastRight’, ‘feedbackType’, ‘choice’, ‘response_times’, ‘stimOn_times’}.</p></li>
<li><p><strong>stim_on_type</strong> (<em>str</em><em>, </em><em>default='stimOn_times'</em>) – The trials key to use when calculating the response times. The difference between this and
<cite>stim_off_type</cite> is used (see notes).</p></li>
<li><p><strong>stim_off_type</strong> (<em>str</em><em>, </em><em>default='response_times'</em>) – The trials key to use when calculating the response times. The difference between this and
<cite>stim_on_type</cite> is used (see notes).</p></li>
<li><p><strong>signed_contrast</strong> (<em>numpy.array</em>) – An array of signed contrasts in percent the length of trials, where left contrasts are -ve.
If None, these are computed from the trials object.</p></li>
<li><p><strong>block</strong> (<em>float</em>) – The block type to compute. If None, all trials are included, otherwise only trials where
probabilityLeft matches this value are included.  For biasedChoiceWorld, the
probabilityLeft set is {0.5, 0.2, 0.8}.</p></li>
<li><p><strong>compute_ci</strong> (<em>bool</em>) – If true, computes and returns the confidence intervals for response time at each contrast.</p></li>
<li><p><strong>alpha</strong> (<em>float</em><em>, </em><em>default=0.32</em>) – Significance level for confidence interval. Must be in (0, 1). If <cite>compute_ci</cite> is false,
this value is ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>numpy.array</em> – The median response times for each unique signed contrast.</p></li>
<li><p><em>numpy.array</em> – The set of unique signed contrasts.</p></li>
<li><p><em>numpy.array</em> – The number of trials for each unique signed contrast.</p></li>
<li><p><em>(numpy.array)</em> – If <cite>compute_ci</cite> is true, an array of confidence intervals is return in the shape (n_trials,
2).</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The response/reaction time by default is the time between stim on and response, i.e. the
entire open-loop trial duration. One could use ‘stimOn_times’ and ‘firstMovement_times’ to
get the true reaction time, or ‘firstMovement_times’ and ‘response_times’ to get the true
response times, or calculate the last movement onset times and calculate the true movement
times.  See module examples for how to calculate this.</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">scipy.stats.bootstrap</span></code></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.criterion_1a">
<span class="sig-name descname"><span class="pre">criterion_1a</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">psych</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perf_easy</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#criterion_1a"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.criterion_1a" title="Link to this definition"></a></dt>
<dd><p>Returns bool indicating whether criteria for status ‘trained_1a’ are met.</p>
<section id="criteria">
<h2>Criteria<a class="headerlink" href="#criteria" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Bias is less than 16</p></li>
<li><p>Threshold is less than 19</p></li>
<li><p>Lapse rate on both sides is less than 0.2</p></li>
<li><p>The total number of trials is greater than 200 for each session</p></li>
<li><p>Performance on easy contrasts &gt; 80% for all sessions</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">param psych<span class="colon">:</span></dt>
<dd class="field-odd"><p>The fit psychometric parameters three consecutive sessions. Parameters are bias, threshold,
lapse high, lapse low.</p>
</dd>
<dt class="field-even">type psych<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.array</p>
</dd>
<dt class="field-odd">param n_trials<span class="colon">:</span></dt>
<dd class="field-odd"><p>The number for trials for each session.</p>
</dd>
<dt class="field-even">type n_trials<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.array of int</p>
</dd>
<dt class="field-odd">param perf_easy<span class="colon">:</span></dt>
<dd class="field-odd"><p>The proportion of correct high contrast trials for each session.</p>
</dd>
<dt class="field-even">type perf_easy<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.array of float</p>
</dd>
<dt class="field-odd">returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the criteria are met for ‘trained_1a’.</p>
</dd>
<dt class="field-even">rtype<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The parameter thresholds chosen here were originally determined by averaging the parameter fits
for a number of sessions determined to be of ‘good’ performance by an experimenter.</p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.criterion_1b">
<span class="sig-name descname"><span class="pre">criterion_1b</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">psych</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perf_easy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#criterion_1b"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.criterion_1b" title="Link to this definition"></a></dt>
<dd><p>Returns bool indicating whether criteria for trained_1b are met.</p>
<section id="id1">
<h2>Criteria<a class="headerlink" href="#id1" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Bias is less than 10</p></li>
<li><p>Threshold is less than 20 (see notes)</p></li>
<li><p>Lapse rate on both sides is less than 0.1</p></li>
<li><p>The total number of trials is greater than 400 for each session</p></li>
<li><p>Performance on easy contrasts &gt; 90% for all sessions</p></li>
<li><p>The median response time across all zero contrast trials is less than 2 seconds</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">param psych<span class="colon">:</span></dt>
<dd class="field-odd"><p>The fit psychometric parameters three consecutive sessions. Parameters are bias, threshold,
lapse high, lapse low.</p>
</dd>
<dt class="field-even">type psych<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.array</p>
</dd>
<dt class="field-odd">param n_trials<span class="colon">:</span></dt>
<dd class="field-odd"><p>The number for trials for each session.</p>
</dd>
<dt class="field-even">type n_trials<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.array of int</p>
</dd>
<dt class="field-odd">param perf_easy<span class="colon">:</span></dt>
<dd class="field-odd"><p>The proportion of correct high contrast trials for each session.</p>
</dd>
<dt class="field-even">type perf_easy<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.array of float</p>
</dd>
<dt class="field-odd">param rt<span class="colon">:</span></dt>
<dd class="field-odd"><p>The median response time for zero contrast trials.</p>
</dd>
<dt class="field-even">type rt<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
<dt class="field-odd">returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the criteria are met for ‘trained_1b’.</p>
</dd>
<dt class="field-even">rtype<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The parameter thresholds chosen here were originally chosen to be slightly stricter than 1a,
however it was decided to use round numbers so that readers would not assume a level of
precision that isn’t there (remember, these parameters were not chosen with any rigor). This
regrettably means that the maximum threshold fit for 1b is greater than for 1a, meaning the
slope of the psychometric curve may be slightly less steep than 1a.</p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.criterion_ephys">
<span class="sig-name descname"><span class="pre">criterion_ephys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">psych_20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psych_80</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perf_easy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#criterion_ephys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.criterion_ephys" title="Link to this definition"></a></dt>
<dd><p>Returns bool indicating whether criteria for ready4ephysrig or ready4recording are met.</p>
<p>NB: The difference between these two is whether the sessions were acquired ot a recording rig
with a delay before the first trial. Neither of these two things are tested here.</p>
<section id="id2">
<h2>Criteria<a class="headerlink" href="#id2" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Lapse on both sides &lt; 0.1 for both bias blocks</p></li>
<li><p>Bias shift between blocks &gt; 5</p></li>
<li><p>Total number of trials &gt; 400 for all sessions</p></li>
<li><p>Performance on easy contrasts &gt; 90% for all sessions</p></li>
<li><p>Median response time for zero contrast stimuli &lt; 2 seconds</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">param psych_20<span class="colon">:</span></dt>
<dd class="field-odd"><p>The fit psychometric parameters for the blocks where probability of a left stimulus is 0.2.
Parameters are bias, threshold, lapse high, lapse low.</p>
</dd>
<dt class="field-even">type psych_20<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.array</p>
</dd>
<dt class="field-odd">param psych_80<span class="colon">:</span></dt>
<dd class="field-odd"><p>The fit psychometric parameters for the blocks where probability of a left stimulus is 0.8.
Parameters are bias, threshold, lapse high, lapse low.</p>
</dd>
<dt class="field-even">type psych_80<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.array</p>
</dd>
<dt class="field-odd">param n_trials<span class="colon">:</span></dt>
<dd class="field-odd"><p>The number of trials for each session (typically three consecutive sessions).</p>
</dd>
<dt class="field-even">type n_trials<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.array</p>
</dd>
<dt class="field-odd">param perf_easy<span class="colon">:</span></dt>
<dd class="field-odd"><p>The proportion of correct high contrast trials for each session (typically three
consecutive sessions).</p>
</dd>
<dt class="field-even">type perf_easy<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.array</p>
</dd>
<dt class="field-odd">param rt<span class="colon">:</span></dt>
<dd class="field-odd"><p>The median response time for zero contrast trials.</p>
</dd>
<dt class="field-even">type rt<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
<dt class="field-odd">returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if subject passes the ready4ephysrig or ready4recording criteria.</p>
</dd>
<dt class="field-even">rtype<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.criterion_delay">
<span class="sig-name descname"><span class="pre">criterion_delay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perf_easy</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#criterion_delay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.criterion_delay" title="Link to this definition"></a></dt>
<dd><p>Returns bool indicating whether criteria for ‘ready4delay’ is met.</p>
<section id="id3">
<h2>Criteria<a class="headerlink" href="#id3" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Total number of trials for any of the sessions is greater than 400</p></li>
<li><p>Performance on easy contrasts is greater than 90% for any of the sessions</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">param n_trials<span class="colon">:</span></dt>
<dd class="field-odd"><p>The number of trials for each session (typically three consecutive sessions).</p>
</dd>
<dt class="field-even">type n_trials<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.array of int</p>
</dd>
<dt class="field-odd">param perf_easy<span class="colon">:</span></dt>
<dd class="field-odd"><p>The proportion of correct high contrast trials for each session (typically three
consecutive sessions).</p>
</dd>
<dt class="field-even">type perf_easy<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.array</p>
</dd>
<dt class="field-odd">returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if subject passes the ‘ready4delay’ criteria.</p>
</dd>
<dt class="field-even">rtype<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.plot_psychometric">
<span class="sig-name descname"><span class="pre">plot_psychometric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_ci</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ci_alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.032</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#plot_psychometric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.plot_psychometric" title="Link to this definition"></a></dt>
<dd><p>Function to plot psychometric curve plots a la datajoint webpage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trials</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.alf.io.html#one.alf.io.AlfBunch" title="(in ONE)"><em>one.alf.io.AlfBunch</em></a>) – An ALF trials object containing the keys {‘probabilityLeft’, ‘contrastLeft’,
‘contrastRight’, ‘feedbackType’, ‘choice’, ‘response_times’, ‘stimOn_times’}.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.pyplot.Axes</em>) – An axis object to plot onto.</p></li>
<li><p><strong>title</strong> (<em>str</em>) – An optional plot title.</p></li>
<li><p><strong>plot_ci</strong> (<em>bool</em>) – If true, computes and plots the confidence intervals for response at each contrast.</p></li>
<li><p><strong>ci_alpha</strong> (<em>float</em><em>, </em><em>default=0.032</em>) – Significance level for confidence interval. Must be in (0, 1). If <cite>plot_ci</cite> is false,
this value is ignored.</p></li>
<li><p><strong>**kwargs</strong> – If <cite>ax</cite> is None, these arguments are passed to matplotlib.pyplot.subplots.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>matplotlib.pyplot.Figure</em> – The figure handle containing the plot.</p></li>
<li><p><em>matplotlib.pyplot.Axes</em> – The plotted axes.</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">statsmodels.stats.proportion.proportion_confint</span></code></dt><dd><p>interval.</p>
</dd>
</dl>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">psychofit.mle_fit_psycho</span></code></p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">psychofit.erf_psycho_2gammas</span></code></dt><dd><p>using the fit parameters.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.plot_reaction_time">
<span class="sig-name descname"><span class="pre">plot_reaction_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_ci</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ci_alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.32</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#plot_reaction_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.plot_reaction_time" title="Link to this definition"></a></dt>
<dd><p>Function to plot reaction time against contrast a la datajoint webpage.</p>
<p>The reaction times are plotted individually for the following three blocks: {0.5, 0.2, 0.8}.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trials</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.alf.io.html#one.alf.io.AlfBunch" title="(in ONE)"><em>one.alf.io.AlfBunch</em></a>) – An ALF trials object containing the keys {‘probabilityLeft’, ‘contrastLeft’,
‘contrastRight’, ‘feedbackType’, ‘choice’, ‘response_times’, ‘stimOn_times’}.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.pyplot.Axes</em>) – An axis object to plot onto.</p></li>
<li><p><strong>title</strong> (<em>str</em>) – An optional plot title.</p></li>
<li><p><strong>plot_ci</strong> (<em>bool</em>) – If true, computes and plots the confidence intervals for response at each contrast.</p></li>
<li><p><strong>ci_alpha</strong> (<em>float</em><em>, </em><em>default=0.32</em>) – Significance level for confidence interval. Must be in (0, 1). If <cite>plot_ci</cite> is false,
this value is ignored.</p></li>
<li><p><strong>**kwargs</strong> – If <cite>ax</cite> is None, these arguments are passed to matplotlib.pyplot.subplots.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>matplotlib.pyplot.Figure</em> – The figure handle containing the plot.</p></li>
<li><p><em>matplotlib.pyplot.Axes</em> – The plotted axes.</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">scipy.stats.bootstrap</span></code></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.plot_reaction_time_over_trials">
<span class="sig-name descname"><span class="pre">plot_reaction_time_over_trials</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stim_on_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'stimOn_times'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#plot_reaction_time_over_trials"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.plot_reaction_time_over_trials" title="Link to this definition"></a></dt>
<dd><p>Function to plot reaction time with trial number a la datajoint webpage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trials</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.alf.io.html#one.alf.io.AlfBunch" title="(in ONE)"><em>one.alf.io.AlfBunch</em></a>) – An ALF trials object containing the keys {‘probabilityLeft’, ‘contrastLeft’,
‘contrastRight’, ‘feedbackType’, ‘choice’, ‘response_times’, ‘stimOn_times’}.</p></li>
<li><p><strong>stim_on_type</strong> (<em>str</em><em>, </em><em>default='stimOn_times'</em>) – The trials key to use when calculating the response times. The difference between this and
‘feedback_times’ is used (see notes for <cite>compute_median_reaction_time</cite>).</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.pyplot.Axes</em>) – An axis object to plot onto.</p></li>
<li><p><strong>title</strong> (<em>str</em>) – An optional plot title.</p></li>
<li><p><strong>**kwargs</strong> – If <cite>ax</cite> is None, these arguments are passed to matplotlib.pyplot.subplots.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>matplotlib.pyplot.Figure</em> – The figure handle containing the plot.</p></li>
<li><p><em>matplotlib.pyplot.Axes</em> – The plotted axes.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="brainbox.behavior.training.query_criterion">
<span class="sig-name descname"><span class="pre">query_criterion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subject</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">from_status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/brainbox/behavior/training.html#query_criterion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#brainbox.behavior.training.query_criterion" title="Link to this definition"></a></dt>
<dd><p>Get the session for which a given training criterion was met.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subject</strong> (<em>str</em>) – The subject name.</p></li>
<li><p><strong>status</strong> (<em>str</em>) – The training status to query for.</p></li>
<li><p><strong>from_status</strong> (<em>str</em><em>, </em><em>optional</em>) – Count number of sessions and days from reaching <cite>from_status</cite> to <cite>status</cite>.</p></li>
<li><p><strong>one</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.api.html#one.api.OneAlyx" title="(in ONE)"><em>one.api.OneAlyx</em></a><em>, </em><em>optional</em>) – An instance of ONE.</p></li>
<li><p><strong>validate</strong> (<em>bool</em>) – If true, check if status in TrainingStatus enumeration. Set to false for non-standard
training pipelines.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>str</em> – The eID of the first session where this training status was reached.</p></li>
<li><p><em>int</em> – The number of sessions it took to reach <cite>status</cite> (optionally from reaching <cite>from_status</cite>).</p></li>
<li><p><em>int</em> – The number of days it tool to reach <cite>status</cite> (optionally from reaching <cite>from_status</cite>).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="brainbox.behavior.dlc.html" class="btn btn-neutral float-left" title="brainbox.behavior.dlc" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="brainbox.behavior.training.TRIALS_KEYS.html" class="btn btn-neutral float-right" title="brainbox.behavior.training.TRIALS_KEYS" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, International Brain Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>