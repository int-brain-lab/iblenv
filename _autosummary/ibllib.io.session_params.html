<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ibllib.io.session_params &mdash; IBL Library  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ibllib.io.video" href="ibllib.io.video.html" />
    <link rel="prev" title="ibllib.io.raw_data_loaders" href="ibllib.io.raw_data_loaders.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            IBL Library
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The Open Neurophysiology Environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/one_quickstart.html">ONE Quick Start</a></li>
<li class="toctree-l1"><a class="reference external" href="https://int-brain-lab.github.io/ONE/">Full documentation Website for ONE</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Public</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/public_introduction.html">Publicly available IBL data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_behavior.html">Data Release - Behavior</a></li>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/data_release_pilot.html">Data Release - Pilot Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_repro_ephys.html">Data Release - Reproducible Ephys Paper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_brainwidemap.html">Data Release - Brain Wide Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_spikesorting_benchmarks.html">Data Release - Spike sorting benchmark datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/information_contact.html">Information and troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Exploring IBL Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_structure.html">Get to know the datasets and folder structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_download.html">Download the public datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../loading_examples.html">Loading Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../02_installation.html">Unified Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_contribution.html">How to contribute</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples &amp; Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../atlas_examples.html">Atlas Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/docs_wheel_moves.html">Working with wheel data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../010_api_reference.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="ibllib.html">ibllib</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ibllib.atlas.html">ibllib.atlas</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.ephys.html">ibllib.ephys</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.exceptions.html">ibllib.exceptions</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="ibllib.io.html">ibllib.io</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.extractors.html">ibllib.io.extractors</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.ffmpeg.html">ibllib.io.ffmpeg</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.flags.html">ibllib.io.flags</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.globus.html">ibllib.io.globus</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.misc.html">ibllib.io.misc</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.npy_header.html">ibllib.io.npy_header</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.raw_daq_loaders.html">ibllib.io.raw_daq_loaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.raw_data_loaders.html">ibllib.io.raw_data_loaders</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">ibllib.io.session_params</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.video.html">ibllib.io.video</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.misc.html">ibllib.misc</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.oneibl.html">ibllib.oneibl</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.pipes.html">ibllib.pipes</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.plots.html">ibllib.plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.qc.html">ibllib.qc</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.tests.html">ibllib.tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.time.html">ibllib.time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="brainbox.html">brainbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="iblatlas.html">iblatlas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBL Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../010_api_reference.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="ibllib.html">ibllib</a></li>
          <li class="breadcrumb-item"><a href="ibllib.io.html">ibllib.io</a></li>
      <li class="breadcrumb-item active">ibllib.io.session_params</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/ibllib.io.session_params.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-ibllib.io.session_params">
<span id="ibllib-io-session-params"></span><h1>ibllib.io.session_params<a class="headerlink" href="#module-ibllib.io.session_params" title="Link to this heading"></a></h1>
<p>A module for handling experiment description files.</p>
<p>Each device computer adds its piece of information and consolidates into the final acquisition
description.</p>
<dl>
<dt>The purpose is 3-fold:</dt><dd><ul class="simple">
<li><p>provide modularity in the extraction: the acquisition description allows to dynamically build</p></li>
</ul>
<p>pipelines.
- assist the copying of the experimental data from device computers to the server computers, in
a way that each device is independent from another.
- assist the copying of the experimental data from device computers to the server computers, in
a way that intermediate states (failed copies) are easily recoverable from and completion
criteria (ie. session ready to extract) is objective and simple (all device files copied).</p>
</dd>
<dt>INGRESS</dt><dd><ul class="simple">
<li><p>each device computer needs to know the session path on the server.</p></li>
<li><p>create a device file locally in a queue directory. This will serve as a copy flag.</p></li>
<li><p>copy the device file to the local server.</p></li>
</ul>
</dd>
<dt>EGRESS</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>go through the queue and for each item:</dt><dd><ul>
<li><p>if the device file is not on the server create it.</p></li>
<li><p>once copy is complete aggregate the qc from file.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<p class="rubric">Functions</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.session_params.aggregate_device" title="ibllib.io.session_params.aggregate_device"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aggregate_device</span></code></a></p></td>
<td><p>Add the contents of a device file to the main acquisition description file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ibllib.io.session_params.get_cameras" title="ibllib.io.session_params.get_cameras"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_cameras</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.session_params.get_collections" title="ibllib.io.session_params.get_collections"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_collections</span></code></a></p></td>
<td><p>Find all collections associated with the session.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ibllib.io.session_params.get_remote_stub_name" title="ibllib.io.session_params.get_remote_stub_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_remote_stub_name</span></code></a></p></td>
<td><p>Get or create device specific file path for the remote experiment.description stub.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.session_params.get_sync" title="ibllib.io.session_params.get_sync"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sync</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ibllib.io.session_params.get_sync_collection" title="ibllib.io.session_params.get_sync_collection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sync_collection</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.session_params.get_sync_extension" title="ibllib.io.session_params.get_sync_extension"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sync_extension</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ibllib.io.session_params.get_sync_label" title="ibllib.io.session_params.get_sync_label"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sync_label</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.session_params.get_sync_namespace" title="ibllib.io.session_params.get_sync_namespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sync_namespace</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ibllib.io.session_params.get_sync_values" title="ibllib.io.session_params.get_sync_values"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sync_values</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.session_params.get_task_collection" title="ibllib.io.session_params.get_task_collection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_task_collection</span></code></a></p></td>
<td><p>Fetch the task collection from an experiment description dict.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ibllib.io.session_params.get_task_protocol" title="ibllib.io.session_params.get_task_protocol"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_task_protocol</span></code></a></p></td>
<td><p>Fetch the task protocol from an experiment description dict.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.session_params.get_task_protocol_number" title="ibllib.io.session_params.get_task_protocol_number"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_task_protocol_number</span></code></a></p></td>
<td><p>Fetch the task protocol number from an experiment description dict.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ibllib.io.session_params.get_video_compressed" title="ibllib.io.session_params.get_video_compressed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_video_compressed</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.session_params.merge_params" title="ibllib.io.session_params.merge_params"><code class="xref py py-obj docutils literal notranslate"><span class="pre">merge_params</span></code></a></p></td>
<td><p>Given two experiment descriptions, update first with fields in second.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ibllib.io.session_params.prepare_experiment" title="ibllib.io.session_params.prepare_experiment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prepare_experiment</span></code></a></p></td>
<td><p>Copy acquisition description yaml to the server and local transfers folder.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.session_params.read_params" title="ibllib.io.session_params.read_params"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_params</span></code></a></p></td>
<td><p>Load an experiment description file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ibllib.io.session_params.write_params" title="ibllib.io.session_params.write_params"><code class="xref py py-obj docutils literal notranslate"><span class="pre">write_params</span></code></a></p></td>
<td><p>Write acquisition description data to the session path.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.session_params.write_yaml" title="ibllib.io.session_params.write_yaml"><code class="xref py py-obj docutils literal notranslate"><span class="pre">write_yaml</span></code></a></p></td>
<td><p>Write a device file.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.write_yaml">
<span class="sig-name descname"><span class="pre">write_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#write_yaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.write_yaml" title="Link to this definition"></a></dt>
<dd><p>Write a device file. This is basically just a yaml dump that ensures the folder tree exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> (<em>pathlib.Path</em>) – The full path to the description yaml file to write to.</p></li>
<li><p><strong>data</strong> (<em>dict</em>) – The data to write to the yaml file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.write_params">
<span class="sig-name descname"><span class="pre">write_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Path</span></span></span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#write_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.write_params" title="Link to this definition"></a></dt>
<dd><p>Write acquisition description data to the session path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session_path</strong> (<em>str</em><em>, </em><em>pathlib.Path</em>) – A session path containing an _ibl_experiment.description.yaml file.</p></li>
<li><p><strong>data</strong> (<em>dict</em>) – The acquisition description data to save</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The full path to the saved acquisition description.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pathlib.Path</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.read_params">
<span class="sig-name descname"><span class="pre">read_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#read_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.read_params" title="Link to this definition"></a></dt>
<dd><p>Load an experiment description file.</p>
<p>In addition to reading the yaml data, this functions ensures that the specification is the most
recent one.  If the file is missing None is returned.  If the file cannot be parsed an empty
dict is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>pathlib.Path</em><em>, </em><em>str</em>) – The path to the description yaml file (or it’s containing folder) to load.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The parsed yaml data, or None if the file was not found.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict, None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p># Load a session’s _ibl_experiment.description.yaml file</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">read_params</span><span class="p">(</span><span class="s1">&#39;/home/data/subject/2020-01-01/001&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p># Load a specific device’s description file</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">read_params</span><span class="p">(</span><span class="s1">&#39;/home/data/subject/2020-01-01/001/_devices/behaviour.yaml&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.merge_params">
<span class="sig-name descname"><span class="pre">merge_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#merge_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.merge_params" title="Link to this definition"></a></dt>
<dd><p>Given two experiment descriptions, update first with fields in second.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>dict</em>) – An experiment description dictionary to be updated with fields from <cite>b</cite>.</p></li>
<li><p><strong>b</strong> (<em>dict</em>) – An experiment description dictionary to update <cite>a</cite> with</p></li>
<li><p><strong>copy</strong> (<em>bool</em>) – If true, return a deep copy of <cite>a</cite> instead of updating directly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A merged dictionary consisting of fields from <cite>a</cite> and <cite>b</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.aggregate_device">
<span class="sig-name descname"><span class="pre">aggregate_device</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_acquisition_description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unlink</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#aggregate_device"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.aggregate_device" title="Link to this definition"></a></dt>
<dd><p>Add the contents of a device file to the main acquisition description file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_device</strong> (<em>pathlib.Path</em>) – The full path to the device yaml file to add to the main description file.</p></li>
<li><p><strong>file_acquisition_description</strong> (<em>pathlib.Path</em>) – The full path to the main acquisition description yaml file to add the device file to.</p></li>
<li><p><strong>unlink</strong> (<em>bool</em>) – If True, the device file is removed after successfully aggregation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The aggregated experiment description data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>AssertionError</strong> – Device file contains a main ‘sync’ key that is already present in the main description
    file.  For an experiment only one main sync device is allowed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.get_cameras">
<span class="sig-name descname"><span class="pre">get_cameras</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#get_cameras"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.get_cameras" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.get_sync_label">
<span class="sig-name descname"><span class="pre">get_sync_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#get_sync_label"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.get_sync_label" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.get_sync">
<span class="sig-name descname"><span class="pre">get_sync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#get_sync"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.get_sync" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.get_sync_values">
<span class="sig-name descname"><span class="pre">get_sync_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#get_sync_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.get_sync_values" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.get_sync_collection">
<span class="sig-name descname"><span class="pre">get_sync_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#get_sync_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.get_sync_collection" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.get_sync_extension">
<span class="sig-name descname"><span class="pre">get_sync_extension</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#get_sync_extension"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.get_sync_extension" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.get_sync_namespace">
<span class="sig-name descname"><span class="pre">get_sync_namespace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#get_sync_namespace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.get_sync_namespace" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.get_task_protocol">
<span class="sig-name descname"><span class="pre">get_task_protocol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#get_task_protocol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.get_task_protocol" title="Link to this definition"></a></dt>
<dd><p>Fetch the task protocol from an experiment description dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sess_params</strong> (<em>dict</em>) – The loaded experiment.description file.</p></li>
<li><p><strong>task_collection</strong> (<em>str</em><em>, </em><em>optional</em>) – Return the protocol that corresponds to this collection (returns the first matching
protocol in the list). If None, all protocols are returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If task_collection is None, returns the set of task protocols, otherwise returns the first
protocol that corresponds to the collection, or None if collection not present.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, set, None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.get_task_collection">
<span class="sig-name descname"><span class="pre">get_task_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#get_task_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.get_task_collection" title="Link to this definition"></a></dt>
<dd><p>Fetch the task collection from an experiment description dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sess_params</strong> (<em>dict</em>) – The loaded experiment.description file.</p></li>
<li><p><strong>task_protocol</strong> (<em>str</em><em>, </em><em>optional</em>) – Return the collection that corresponds to this protocol (returns the first matching
protocol in the list). If None, all collections are returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If task_protocol is None, returns the set of collections, otherwise returns the first
collection that corresponds to the protocol, or None if protocol not present.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, set, None</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The order of the set may not be the same as the descriptions tasks order when iterating.</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.get_task_protocol_number">
<span class="sig-name descname"><span class="pre">get_task_protocol_number</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#get_task_protocol_number"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.get_task_protocol_number" title="Link to this definition"></a></dt>
<dd><p>Fetch the task protocol number from an experiment description dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sess_params</strong> (<em>dict</em>) – The loaded experiment.description file.</p></li>
<li><p><strong>task_protocol</strong> (<em>str</em><em>, </em><em>optional</em>) – Return the number that corresponds to this protocol (returns the first matching
protocol in the list). If None, all numbers are returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>If task_protocol is None, returns list of all numbers, otherwise returns the first
number that corresponds to the protocol, or None if protocol not present.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, list, None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.get_collections">
<span class="sig-name descname"><span class="pre">get_collections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#get_collections"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.get_collections" title="Link to this definition"></a></dt>
<dd><p>Find all collections associated with the session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sess_params</strong> (<em>dict</em>) – The loaded experiment description map.</p></li>
<li><p><strong>flat</strong> (<em>bool</em><em> (</em><em>False</em><em>)</em>) – If True, return a flat list of unique collections, otherwise return a map of device/sync/task</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>dict[str, str]</em> – A map of device/sync/task and the corresponding collection name.</p></li>
<li><p><em>list[str]</em> – A flat list of unique collection names.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Assumes only the following data types contained: list, dict, None, str.</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.get_video_compressed">
<span class="sig-name descname"><span class="pre">get_video_compressed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#get_video_compressed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.get_video_compressed" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.get_remote_stub_name">
<span class="sig-name descname"><span class="pre">get_remote_stub_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#get_remote_stub_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.get_remote_stub_name" title="Link to this definition"></a></dt>
<dd><p>Get or create device specific file path for the remote experiment.description stub.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session_path</strong> (<em>pathlib.Path</em>) – A remote session path.</p></li>
<li><p><strong>device_id</strong> (<em>str</em><em>, </em><em>optional</em>) – A device name, if None the TRANSFER_LABEL parameter is used (defaults to this device’s
hostname with a unique numeric ID)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The full file path to the remote experiment description stub.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pathlib.Path</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_remote_stub_name</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s1">&#39;subject&#39;</span><span class="p">,</span> <span class="s1">&#39;2020-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;001&#39;</span><span class="p">),</span> <span class="s1">&#39;host-123&#39;</span><span class="p">)</span>
<span class="go">Path.home() / &#39;subject/2020-01-01/001/_devices/2020-01-01_1_subject@host-123.yaml&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.session_params.prepare_experiment">
<span class="sig-name descname"><span class="pre">prepare_experiment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acquisition_description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/session_params.html#prepare_experiment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.session_params.prepare_experiment" title="Link to this definition"></a></dt>
<dd><p>Copy acquisition description yaml to the server and local transfers folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session_path</strong> (<em>str</em><em>, </em><em>pathlib.Path</em><em>, </em><em>pathlib.PurePath</em>) – The RELATIVE session path, e.g. subject/2020-01-01/001.</p></li>
<li><p><strong>acquisition_description</strong> (<em>dict</em>) – The data to write to the experiment.description.yaml file.</p></li>
<li><p><strong>local</strong> (<em>str</em><em>, </em><em>pathlib.Path</em>) – The path to the local session folders.
&gt;&gt;&gt; C:iblrigv8_datacortexlabSubjects  # noqa</p></li>
<li><p><strong>remote</strong> (<em>str</em><em>, </em><em>pathlib.Path</em>) – The path to the remote server session folders.
&gt;&gt;&gt; Y:Subjects  # noqa</p></li>
<li><p><strong>device_id</strong> (<em>str</em><em>, </em><em>optional</em>) – A device name, if None the TRANSFER_LABEL parameter is used (defaults to this device’s
hostname with a unique numeric ID)</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em>) – If true, overwrite any existing file with the new one, otherwise, update the existing file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ibllib.io.raw_data_loaders.html" class="btn btn-neutral float-left" title="ibllib.io.raw_data_loaders" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ibllib.io.video.html" class="btn btn-neutral float-right" title="ibllib.io.video" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, International Brain Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>