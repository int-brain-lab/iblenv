<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ibllib.io.raw_daq_loaders &mdash; IBL Library  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ibllib.io.raw_data_loaders" href="ibllib.io.raw_data_loaders.html" />
    <link rel="prev" title="ibllib.io.npy_header" href="ibllib.io.npy_header.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            IBL Library
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The Open Neurophysiology Environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/one_quickstart.html">ONE Quick Start</a></li>
<li class="toctree-l1"><a class="reference external" href="https://int-brain-lab.github.io/ONE/">Full documentation Website for ONE</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Public</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/public_introduction.html">Publicly available IBL data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_behavior.html">Data Release - Behavior</a></li>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/data_release_pilot.html">Data Release - Pilot Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_repro_ephys.html">Data Release - Reproducible Ephys Paper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_brainwidemap.html">Data Release - Brain Wide Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_release_spikesorting_benchmarks.html">Data Release - Spike sorting benchmark datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../public_docs/information_contact.html">Information and troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Exploring IBL Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_structure.html">Get to know the datasets and folder structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/data_download.html">Download the public datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../loading_examples.html">Loading Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../02_installation.html">Unified Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_contribution.html">How to contribute</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples &amp; Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../atlas_examples.html">Atlas Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks_external/docs_wheel_moves.html">Working with wheel data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../010_api_reference.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="ibllib.html">ibllib</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ibllib.atlas.html">ibllib.atlas</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.ephys.html">ibllib.ephys</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.exceptions.html">ibllib.exceptions</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="ibllib.io.html">ibllib.io</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.extractors.html">ibllib.io.extractors</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.ffmpeg.html">ibllib.io.ffmpeg</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.flags.html">ibllib.io.flags</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.globus.html">ibllib.io.globus</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.misc.html">ibllib.io.misc</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.npy_header.html">ibllib.io.npy_header</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">ibllib.io.raw_daq_loaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.raw_data_loaders.html">ibllib.io.raw_data_loaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.session_params.html">ibllib.io.session_params</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibllib.io.video.html">ibllib.io.video</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.misc.html">ibllib.misc</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.oneibl.html">ibllib.oneibl</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.pipes.html">ibllib.pipes</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.plots.html">ibllib.plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.qc.html">ibllib.qc</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.tests.html">ibllib.tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibllib.time.html">ibllib.time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="brainbox.html">brainbox</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBL Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../010_api_reference.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="ibllib.html">ibllib</a></li>
          <li class="breadcrumb-item"><a href="ibllib.io.html">ibllib.io</a></li>
      <li class="breadcrumb-item active">ibllib.io.raw_daq_loaders</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/ibllib.io.raw_daq_loaders.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-ibllib.io.raw_daq_loaders">
<span id="ibllib-io-raw-daq-loaders"></span><h1>ibllib.io.raw_daq_loaders<a class="headerlink" href="#module-ibllib.io.raw_daq_loaders" title="Link to this heading">ÔÉÅ</a></h1>
<p>Loader functions for various DAQ data formats.</p>
<p class="rubric">Functions</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.raw_daq_loaders.correct_counter_discontinuities" title="ibllib.io.raw_daq_loaders.correct_counter_discontinuities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">correct_counter_discontinuities</span></code></a></p></td>
<td><p>Correct over- and underflow wrap around values for DAQ counter channel.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ibllib.io.raw_daq_loaders.extract_sync_timeline" title="ibllib.io.raw_daq_loaders.extract_sync_timeline"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extract_sync_timeline</span></code></a></p></td>
<td><p>Load sync channels from a timeline object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.raw_daq_loaders.load_channels_tdms" title="ibllib.io.raw_daq_loaders.load_channels_tdms"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_channels_tdms</span></code></a></p></td>
<td><p>Note: This currently cannot deal with arbitrary groups.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ibllib.io.raw_daq_loaders.load_raw_daq_tdms" title="ibllib.io.raw_daq_loaders.load_raw_daq_tdms"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_raw_daq_tdms</span></code></a></p></td>
<td><p>Load a raw DAQ TDMS file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.raw_daq_loaders.load_sync_tdms" title="ibllib.io.raw_daq_loaders.load_sync_tdms"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_sync_tdms</span></code></a></p></td>
<td><p>Load a sync channels from a raw DAQ TDMS file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ibllib.io.raw_daq_loaders.load_timeline_sync_and_chmap" title="ibllib.io.raw_daq_loaders.load_timeline_sync_and_chmap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_timeline_sync_and_chmap</span></code></a></p></td>
<td><p>Load the sync and channel map from disk.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.raw_daq_loaders.timeline_get_channel" title="ibllib.io.raw_daq_loaders.timeline_get_channel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">timeline_get_channel</span></code></a></p></td>
<td><p>Given a timeline object, returns the vector of values recorded from a given channel name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#ibllib.io.raw_daq_loaders.timeline_meta2chmap" title="ibllib.io.raw_daq_loaders.timeline_meta2chmap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">timeline_meta2chmap</span></code></a></p></td>
<td><p>Convert a timeline meta object to a sync channel map.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ibllib.io.raw_daq_loaders.timeline_meta2wiring" title="ibllib.io.raw_daq_loaders.timeline_meta2wiring"><code class="xref py py-obj docutils literal notranslate"><span class="pre">timeline_meta2wiring</span></code></a></p></td>
<td><p>Given a timeline meta data object, return a dictionary of wiring info.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.raw_daq_loaders.load_raw_daq_tdms">
<span class="sig-name descname"><span class="pre">load_raw_daq_tdms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TdmsFile</span></span></span><a class="reference internal" href="../_modules/ibllib/io/raw_daq_loaders.html#load_raw_daq_tdms"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.raw_daq_loaders.load_raw_daq_tdms" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Load a raw DAQ TDMS file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em><em>, </em><em>pathlib.Path</em>) ‚Äì The location of the .tdms file to laod.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The loaded TDMS object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>nptdms.tdms.TdmsFile</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.raw_daq_loaders.load_channels_tdms">
<span class="sig-name descname"><span class="pre">load_channels_tdms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/raw_daq_loaders.html#load_channels_tdms"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.raw_daq_loaders.load_channels_tdms" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Note: This currently cannot deal with arbitrary groups.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em><em>, </em><em>pathlib.Path</em>) ‚Äì The file or folder path of the raw TDMS data file.</p></li>
<li><p><strong>chmap</strong> (<em>dictionary mapping devices names to channel codes: example {&quot;photometry&quot;: 'AI0'</em><em>, </em><em>'bpod': 'AI1'}</em>) ‚Äì if None, will read all of available channel from the DAQ</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.raw_daq_loaders.load_sync_tdms">
<span class="sig-name descname"><span class="pre">load_sync_tdms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sync_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">floor_percentile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/raw_daq_loaders.html#load_sync_tdms"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.raw_daq_loaders.load_sync_tdms" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Load a sync channels from a raw DAQ TDMS file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em><em>, </em><em>pathlib.Path</em>) ‚Äì The file or folder path of the raw TDMS data file.</p></li>
<li><p><strong>sync_map</strong> (<em>dict</em>) ‚Äì A map of channel names and channel IDs.</p></li>
<li><p><strong>fs</strong> (<em>float</em>) ‚Äì Sampling rate in Hz.</p></li>
<li><p><strong>threshold</strong> (<em>float</em>) ‚Äì The threshold for applying to analogue channels</p></li>
<li><p><strong>floor_percentile</strong> (<em>float</em>) ‚Äì 10% removes the percentile value of the analog trace before thresholding. This is to avoid
DC offset drift.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>one.alf.io.AlfBunch</em> ‚Äì A dictionary with keys (‚Äòtimes‚Äô, ‚Äòpolarities‚Äô, ‚Äòchannels‚Äô), containing the sync pulses and
the corresponding channel numbers.</p></li>
<li><p><em>dict</em> ‚Äì A map of channel names and their corresponding indices.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.raw_daq_loaders.correct_counter_discontinuities">
<span class="sig-name descname"><span class="pre">correct_counter_discontinuities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overflow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4294967296</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/raw_daq_loaders.html#correct_counter_discontinuities"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.raw_daq_loaders.correct_counter_discontinuities" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Correct over- and underflow wrap around values for DAQ counter channel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>raw</strong> (<em>numpy.array</em>) ‚Äì An array of counts.</p></li>
<li><p><strong>overflow</strong> (<em>int</em>) ‚Äì The maximum representable value of the data before it was cast to float64.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An array of counts with the over- and underflow discontinuities removed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.raw_daq_loaders.load_timeline_sync_and_chmap">
<span class="sig-name descname"><span class="pre">load_timeline_sync_and_chmap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">alf_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/raw_daq_loaders.html#load_timeline_sync_and_chmap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.raw_daq_loaders.load_timeline_sync_and_chmap" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Load the sync and channel map from disk.</p>
<p>If the sync files do not exist, they are extracted from the raw DAQ data and saved.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>alf_path</strong> (<em>str</em><em>, </em><em>pathlib.Path</em>) ‚Äì The folder containing the sync file and raw DAQ data.</p></li>
<li><p><strong>chmap</strong> (<em>dict</em>) ‚Äì An optional channel map, otherwise extracted based on the union of timeline meta data and
default extractor channel map names.</p></li>
<li><p><strong>timeline</strong> (<em>dict</em>) ‚Äì An optional timeline object, otherwise is loaded from alf_path.</p></li>
<li><p><strong>save</strong> (<em>bool</em>) ‚Äì If true, save the sync files if they don‚Äôt already exist.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>one.alf.io.AlfBunch</em> ‚Äì A dictionary with keys (‚Äòtimes‚Äô, ‚Äòpolarities‚Äô, ‚Äòchannels‚Äô), containing the sync pulses and
the corresponding channel numbers.</p></li>
<li><p><em>dict, optional</em> ‚Äì A map of channel names and their corresponding indices for sync channels, if chmap is None.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.raw_daq_loaders.extract_sync_timeline">
<span class="sig-name descname"><span class="pre">extract_sync_timeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">floor_percentile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/raw_daq_loaders.html#extract_sync_timeline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.raw_daq_loaders.extract_sync_timeline" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Load sync channels from a timeline object.</p>
<p>Note: Because the scan frequency is typically faster than the sample rate, the position and
edge count channels may detect more than one front between samples.  Therefore for these, the
raw data is more accurate than the extracted polarities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeline</strong> (<em>dict</em><em>, </em><em>str</em><em>, </em><em>pathlib.Path</em>) ‚Äì A timeline object or the file or folder path of the _timeline_DAQdata files.</p></li>
<li><p><strong>chmap</strong> (<em>dict</em>) ‚Äì A map of channel names and channel IDs.</p></li>
<li><p><strong>floor_percentile</strong> (<em>float</em>) ‚Äì 10% removes the percentile value of the analog trace before thresholding. This is to avoid
DC offset drift.</p></li>
<li><p><strong>threshold</strong> (<em>float</em><em>, </em><em>dict</em><em> of </em><em>str: float</em>) ‚Äì The threshold for applying to analogue channels. If None, take mean after subtracting
floor percentile offset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>one.alf.io.AlfBunch</em> ‚Äì A dictionary with keys (‚Äòtimes‚Äô, ‚Äòpolarities‚Äô, ‚Äòchannels‚Äô), containing the sync pulses and
the corresponding channel numbers.</p></li>
<li><p><em>dict, optional</em> ‚Äì A map of channel names and their corresponding indices for sync channels, if chmap is None.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.raw_daq_loaders.timeline_meta2wiring">
<span class="sig-name descname"><span class="pre">timeline_meta2wiring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/raw_daq_loaders.html#timeline_meta2wiring"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.raw_daq_loaders.timeline_meta2wiring" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Given a timeline meta data object, return a dictionary of wiring info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em><em>, </em><em>pathlib.Path</em>) ‚Äì The path of the timeline meta file, _timeline_DAQdata.meta.</p></li>
<li><p><strong>save</strong> (<em>bool</em>) ‚Äì If true, save the timeline wiring file in the same location as the meta file,
_timeline_DAQData.wiring.json.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>dict</em> ‚Äì A dictionary with base keys {‚ÄòSYSTEM‚Äô, ‚ÄòSYNC_WIRING_DIGITAL‚Äô, ‚ÄòSYNC_WIRING_ANALOG‚Äô}, the
latter of which contain maps of channel names and their IDs.</p></li>
<li><p><em>pathlib.Path</em> ‚Äì If save=True, returns the path of the wiring file.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.raw_daq_loaders.timeline_meta2chmap">
<span class="sig-name descname"><span class="pre">timeline_meta2chmap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">meta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_channels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_channels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/raw_daq_loaders.html#timeline_meta2chmap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.raw_daq_loaders.timeline_meta2chmap" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Convert a timeline meta object to a sync channel map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>meta</strong> (<em>dict</em>) ‚Äì A loaded timeline metadata file, i.e. _timeline_DAQdata.meta.</p></li>
<li><p><strong>exclude_channels</strong> (<em>list</em>) ‚Äì An optional list of channels to exclude from the channel map.</p></li>
<li><p><strong>include_channels</strong> (<em>list</em>) ‚Äì An optional list of channels to include from the channel map, takes priority over the
exclude list.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A map of channel names and their corresponding indices for sync channels.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ibllib.io.raw_daq_loaders.timeline_get_channel">
<span class="sig-name descname"><span class="pre">timeline_get_channel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ibllib/io/raw_daq_loaders.html#timeline_get_channel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ibllib.io.raw_daq_loaders.timeline_get_channel" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Given a timeline object, returns the vector of values recorded from a given channel name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeline</strong> (<a class="reference external" href="https://int-brain-lab.github.io/ONE/_autosummary/one.alf.io.html#one.alf.io.AlfBunch" title="(in ONE)"><em>one.alf.io.AlfBunch</em></a>) ‚Äì A loaded timeline object.</p></li>
<li><p><strong>channel_name</strong> (<em>str</em>) ‚Äì The name of a channel to extract.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The channel data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ibllib.io.npy_header.html" class="btn btn-neutral float-left" title="ibllib.io.npy_header" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ibllib.io.raw_data_loaders.html" class="btn btn-neutral float-right" title="ibllib.io.raw_data_loaders" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, International Brain Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>